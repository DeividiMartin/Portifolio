(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,254471,(e,t,r)=>{"use strict";var a=e.i(398228);let n=void 0!==a.Buffer,o=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,i=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function s(e,t,r){null==r&&null!==t&&"object"==typeof t&&(r=t,t=void 0),n&&a.Buffer.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let s=JSON.parse(e,t);if(null===s||"object"!=typeof s)return s;let u=r&&r.protoAction||"error",c=r&&r.constructorAction||"error";if("ignore"===u&&"ignore"===c)return s;if("ignore"!==u&&"ignore"!==c){if(!1===o.test(e)&&!1===i.test(e))return s}else if("ignore"!==u&&"ignore"===c){if(!1===o.test(e))return s}else if(!1===i.test(e))return s;return l(s,{protoAction:u,constructorAction:c,safe:r&&r.safe})}function l(e,{protoAction:t="error",constructorAction:r="error",safe:a}={}){let n=[e];for(;n.length;){let e=n;for(let o of(n=[],e)){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(!0===a)return null;if("error"===t)throw SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if("ignore"!==r&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(!0===a)return null;if("error"===r)throw SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let e in o){let t=o[e];t&&"object"==typeof t&&n.push(t)}}}return e}function u(e,t,r){let a=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return s(e,t,r)}finally{Error.stackTraceLimit=a}}t.exports=u,t.exports.default=u,t.exports.parse=u,t.exports.safeParse=function(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return s(e,t,{safe:!0})}catch(e){return null}finally{Error.stackTraceLimit=r}},t.exports.scan=l},561030,(e,t,r)=>{t.exports=function(e,t){let r;if("function"!=typeof e)throw TypeError(`Expected the first argument to be a \`function\`, got \`${typeof e}\`.`);let a=0;return function(...n){clearTimeout(r);let o=Date.now(),i=t-(o-a);i<=0?(a=o,e.apply(this,n)):r=setTimeout(()=>{a=Date.now(),e.apply(this,n)},i)}}},312531,e=>{"use strict";let t,r;e.i(143525);var a,n,o="vercel.ai.error",i=Symbol.for(o),s=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[a]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,o)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}};a=i;var l=s,u=(Symbol.for("vercel.ai.error.AI_APICallError"),Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError"),"AI_InvalidArgumentError"),c=`vercel.ai.error.${u}`,d=Symbol.for(c),p=class extends l{constructor({message:e,cause:t,argument:r}){super({name:u,message:e,cause:t}),this[n]=!0,this.argument=r}static isInstance(e){return l.hasMarker(e,c)}};n=d,Symbol.for("vercel.ai.error.AI_InvalidPromptError"),Symbol.for("vercel.ai.error.AI_InvalidResponseDataError"),Symbol.for("vercel.ai.error.AI_JSONParseError"),Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError"),Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError"),Symbol.for("vercel.ai.error.AI_TypeValidationError"),Symbol.for("vercel.ai.error.AI_UnsupportedFunctionalityError"),e.i(254471),e.i(710717),(({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:a="-"}={})=>{let n=((e,t=21)=>(r=t)=>{let a="",n=0|r;for(;n--;)a+=e[Math.random()*e.length|0];return a})(r,t);if(null!=e){if(r.includes(a))throw new p({argument:"separator",message:`The separator "${a}" must not be part of the alphabet "${r}".`});return t=>`${e}${a}${n(t)}`}})(),Symbol.for("vercel.ai.validator");var{btoa:f,atob:m}=globalThis;let y=Symbol("Let zodToJsonSchema decide on which parser to use");function g(e,t,r,a){a?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function h(e,t,r,a,n){e[t]=r,g(e,t,a,n)}let v=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};var b=e.i(587955);function _(e){if("openAi"!==e.target)return{};let t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?v(t,e.currentPath):t.join("/")}}function w(e,t){return D(e.type._def,t)}let k=/^[cC][^\s-]{8,}$/,P=/^[0-9a-z]+$/,T=/^[0-9A-HJKMNP-TV-Z]{26}$/,x=/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,Z=()=>(void 0===t&&(t=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),t),A=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,E=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,S=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,F=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,O=/^[a-zA-Z0-9_-]{21}$/,j=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;function I(e,t){let r={type:"string"};if(e.checks)for(let a of e.checks)switch(a.kind){case"min":h(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t);break;case"max":h(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t);break;case"email":switch(t.emailStrategy){case"format:email":C(r,"email",a.message,t);break;case"format:idn-email":C(r,"idn-email",a.message,t);break;case"pattern:zod":M(r,x,a.message,t)}break;case"url":C(r,"uri",a.message,t);break;case"uuid":C(r,"uuid",a.message,t);break;case"regex":M(r,a.regex,a.message,t);break;case"cuid":M(r,k,a.message,t);break;case"cuid2":M(r,P,a.message,t);break;case"startsWith":M(r,RegExp(`^${L(a.value,t)}`),a.message,t);break;case"endsWith":M(r,RegExp(`${L(a.value,t)}$`),a.message,t);break;case"datetime":C(r,"date-time",a.message,t);break;case"date":C(r,"date",a.message,t);break;case"time":C(r,"time",a.message,t);break;case"duration":C(r,"duration",a.message,t);break;case"length":h(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t),h(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t);break;case"includes":M(r,RegExp(L(a.value,t)),a.message,t);break;case"ip":"v6"!==a.version&&C(r,"ipv4",a.message,t),"v4"!==a.version&&C(r,"ipv6",a.message,t);break;case"base64url":M(r,F,a.message,t);break;case"jwt":M(r,j,a.message,t);break;case"cidr":"v6"!==a.version&&M(r,A,a.message,t),"v4"!==a.version&&M(r,E,a.message,t);break;case"emoji":M(r,Z(),a.message,t);break;case"ulid":M(r,T,a.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":C(r,"binary",a.message,t);break;case"contentEncoding:base64":h(r,"contentEncoding","base64",a.message,t);break;case"pattern:zod":M(r,S,a.message,t)}break;case"nanoid":M(r,O,a.message,t)}return r}function L(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)N.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}let N=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function C(e,t,r,a){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&a.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):h(e,"format",t,r,a)}function M(e,t,r,a){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&a.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:R(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):h(e,"pattern",R(t,a),r,a)}function R(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},a=r.i?e.source.toLowerCase():e.source,n="",o=!1,i=!1,s=!1;for(let e=0;e<a.length;e++){if(o){n+=a[e],o=!1;continue}if(r.i){if(i){if(a[e].match(/[a-z]/)){s?(n+=a[e],n+=`${a[e-2]}-${a[e]}`.toUpperCase(),s=!1):"-"===a[e+1]&&a[e+2]?.match(/[a-z]/)?(n+=a[e],s=!0):n+=`${a[e]}${a[e].toUpperCase()}`;continue}}else if(a[e].match(/[a-z]/)){n+=`[${a[e]}${a[e].toUpperCase()}]`;continue}}if(r.m){if("^"===a[e]){n+=`(^|(?<=[\r
]))`;continue}else if("$"===a[e]){n+=`($|(?=[\r
]))`;continue}}if(r.s&&"."===a[e]){n+=i?`${a[e]}\r
`:`[${a[e]}\r
]`;continue}n+=a[e],"\\"===a[e]?o=!0:i&&"]"===a[e]?i=!1:i||"["!==a[e]||(i=!0)}try{new RegExp(n)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return n}function $(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===b.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,a)=>({...r,[a]:D(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",a]})??_(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};let r={type:"object",additionalProperties:D(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===b.ZodFirstPartyTypeKind.ZodString&&e.keyType._def.checks?.length){let{type:a,...n}=I(e.keyType._def,t);return{...r,propertyNames:n}}if(e.keyType?._def.typeName===b.ZodFirstPartyTypeKind.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===b.ZodFirstPartyTypeKind.ZodBranded&&e.keyType._def.type._def.typeName===b.ZodFirstPartyTypeKind.ZodString&&e.keyType._def.type._def.checks?.length){let{type:a,...n}=w(e.keyType._def,t);return{...r,propertyNames:n}}return r}let K={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},z=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>D(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0};function D(e,t,r=!1){let a=t.seen.get(e);if(t.override){let n=t.override?.(e,t,a,r);if(n!==y)return n}if(a&&!r){let e=V(a,t);if(void 0!==e)return e}let n={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,n);let o=((e,t,r)=>{switch(t){case b.ZodFirstPartyTypeKind.ZodString:return I(e,r);case b.ZodFirstPartyTypeKind.ZodNumber:let a={type:"number"};if(!e.checks)return a;for(let t of e.checks)switch(t.kind){case"int":a.type="integer",g(a,"type",t.message,r);break;case"min":"jsonSchema7"===r.target?t.inclusive?h(a,"minimum",t.value,t.message,r):h(a,"exclusiveMinimum",t.value,t.message,r):(t.inclusive||(a.exclusiveMinimum=!0),h(a,"minimum",t.value,t.message,r));break;case"max":"jsonSchema7"===r.target?t.inclusive?h(a,"maximum",t.value,t.message,r):h(a,"exclusiveMaximum",t.value,t.message,r):(t.inclusive||(a.exclusiveMaximum=!0),h(a,"maximum",t.value,t.message,r));break;case"multipleOf":h(a,"multipleOf",t.value,t.message,r)}return a;case b.ZodFirstPartyTypeKind.ZodObject:return function(e,t){let r="openAi"===t.target,a={type:"object",properties:{}},n=[],o=e.shape();for(let e in o){let i=o[e];if(void 0===i||void 0===i._def)continue;let s=function(e){try{return e.isOptional()}catch{return!0}}(i);s&&r&&("ZodOptional"===i._def.typeName&&(i=i._def.innerType),i.isNullable()||(i=i.nullable()),s=!1);let l=D(i._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==l&&(a.properties[e]=l,s||n.push(e))}n.length&&(a.required=n);let i=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return D(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==i&&(a.additionalProperties=i),a}(e,r);case b.ZodFirstPartyTypeKind.ZodBigInt:let n={type:"integer",format:"int64"};if(!e.checks)return n;for(let t of e.checks)switch(t.kind){case"min":"jsonSchema7"===r.target?t.inclusive?h(n,"minimum",t.value,t.message,r):h(n,"exclusiveMinimum",t.value,t.message,r):(t.inclusive||(n.exclusiveMinimum=!0),h(n,"minimum",t.value,t.message,r));break;case"max":"jsonSchema7"===r.target?t.inclusive?h(n,"maximum",t.value,t.message,r):h(n,"exclusiveMaximum",t.value,t.message,r):(t.inclusive||(n.exclusiveMaximum=!0),h(n,"maximum",t.value,t.message,r));break;case"multipleOf":h(n,"multipleOf",t.value,t.message,r)}return n;case b.ZodFirstPartyTypeKind.ZodBoolean:return{type:"boolean"};case b.ZodFirstPartyTypeKind.ZodDate:return function e(t,r,a){let n=a??r.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((a,n)=>e(t,r,a))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":var o=t,i=r;let s={type:"integer",format:"unix-time"};if("openApi3"===i.target)return s;for(let e of o.checks)switch(e.kind){case"min":h(s,"minimum",e.value,e.message,i);break;case"max":h(s,"maximum",e.value,e.message,i)}return s}}(e,r);case b.ZodFirstPartyTypeKind.ZodUndefined:return{not:_(r)};case b.ZodFirstPartyTypeKind.ZodNull:return"openApi3"===r.target?{enum:["null"],nullable:!0}:{type:"null"};case b.ZodFirstPartyTypeKind.ZodArray:let o;return o={type:"array"},e.type?._def&&e.type?._def?.typeName!==b.ZodFirstPartyTypeKind.ZodAny&&(o.items=D(e.type._def,{...r,currentPath:[...r.currentPath,"items"]})),e.minLength&&h(o,"minItems",e.minLength.value,e.minLength.message,r),e.maxLength&&h(o,"maxItems",e.maxLength.value,e.maxLength.message,r),e.exactLength&&(h(o,"minItems",e.exactLength.value,e.exactLength.message,r),h(o,"maxItems",e.exactLength.value,e.exactLength.message,r)),o;case b.ZodFirstPartyTypeKind.ZodUnion:case b.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:if("openApi3"===r.target)return z(e,r);let i=e.options instanceof Map?Array.from(e.options.values()):e.options;if(i.every(e=>e._def.typeName in K&&(!e._def.checks||!e._def.checks.length))){let e=i.reduce((e,t)=>{let r=K[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(i.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=i.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===i.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:i.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(i.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:i.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return z(e,r);case b.ZodFirstPartyTypeKind.ZodIntersection:let s,l,u;return s=[D(e.left._def,{...r,currentPath:[...r.currentPath,"allOf","0"]}),D(e.right._def,{...r,currentPath:[...r.currentPath,"allOf","1"]})].filter(e=>!!e),l="jsonSchema2019-09"===r.target?{unevaluatedProperties:!1}:void 0,u=[],s.forEach(e=>{if((!("type"in e)||"string"!==e.type)&&"allOf"in e)u.push(...e.allOf),void 0===e.unevaluatedProperties&&(l=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...a}=e;t=a}else l=void 0;u.push(t)}}),u.length?{allOf:u,...l}:void 0;case b.ZodFirstPartyTypeKind.ZodTuple:return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,t)=>D(e._def,{...r,currentPath:[...r.currentPath,"items",`${t}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:D(e.rest._def,{...r,currentPath:[...r.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,t)=>D(e._def,{...r,currentPath:[...r.currentPath,"items",`${t}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])};case b.ZodFirstPartyTypeKind.ZodRecord:return $(e,r);case b.ZodFirstPartyTypeKind.ZodLiteral:let c;return"bigint"!=(c=typeof e.value)&&"number"!==c&&"boolean"!==c&&"string"!==c?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===r.target?{type:"bigint"===c?"integer":c,enum:[e.value]}:{type:"bigint"===c?"integer":c,const:e.value};case b.ZodFirstPartyTypeKind.ZodEnum:return{type:"string",enum:Array.from(e.values)};case b.ZodFirstPartyTypeKind.ZodNativeEnum:let d,p,f;return d=e.values,{type:1===(f=Array.from(new Set((p=Object.keys(e.values).filter(e=>"number"!=typeof d[d[e]]).map(e=>d[e])).map(e=>typeof e)))).length?"string"===f[0]?"string":"number":["string","number"],enum:p};case b.ZodFirstPartyTypeKind.ZodNullable:if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===r.target?{type:K[e.innerType._def.typeName],nullable:!0}:{type:[K[e.innerType._def.typeName],"null"]};if("openApi3"===r.target){let t=D(e.innerType._def,{...r,currentPath:[...r.currentPath]});return t&&"$ref"in t?{allOf:[t],nullable:!0}:t&&{...t,nullable:!0}}let m=D(e.innerType._def,{...r,currentPath:[...r.currentPath,"anyOf","0"]});return m&&{anyOf:[m,{type:"null"}]};case b.ZodFirstPartyTypeKind.ZodOptional:if(r.currentPath.toString()===r.propertyPath?.toString())return D(e.innerType._def,r);let y=D(e.innerType._def,{...r,currentPath:[...r.currentPath,"anyOf","1"]});return y?{anyOf:[{not:_(r)},y]}:_(r);case b.ZodFirstPartyTypeKind.ZodMap:if("record"===r.mapStrategy)return $(e,r);return{type:"array",maxItems:125,items:{type:"array",items:[D(e.keyType._def,{...r,currentPath:[...r.currentPath,"items","items","0"]})||_(r),D(e.valueType._def,{...r,currentPath:[...r.currentPath,"items","items","1"]})||_(r)],minItems:2,maxItems:2}};case b.ZodFirstPartyTypeKind.ZodSet:let v;return v={type:"array",uniqueItems:!0,items:D(e.valueType._def,{...r,currentPath:[...r.currentPath,"items"]})},e.minSize&&h(v,"minItems",e.minSize.value,e.minSize.message,r),e.maxSize&&h(v,"maxItems",e.maxSize.value,e.maxSize.message,r),v;case b.ZodFirstPartyTypeKind.ZodLazy:return()=>e.getter()._def;case b.ZodFirstPartyTypeKind.ZodPromise:return D(e.type._def,r);case b.ZodFirstPartyTypeKind.ZodNaN:case b.ZodFirstPartyTypeKind.ZodNever:return"openAi"===r.target?void 0:{not:_({...r,currentPath:[...r.currentPath,"not"]})};case b.ZodFirstPartyTypeKind.ZodEffects:return"input"===r.effectStrategy?D(e.schema._def,r):_(r);case b.ZodFirstPartyTypeKind.ZodAny:case b.ZodFirstPartyTypeKind.ZodUnknown:return _(r);case b.ZodFirstPartyTypeKind.ZodDefault:return{...D(e.innerType._def,r),default:e.defaultValue()};case b.ZodFirstPartyTypeKind.ZodBranded:return w(e,r);case b.ZodFirstPartyTypeKind.ZodReadonly:case b.ZodFirstPartyTypeKind.ZodCatch:return D(e.innerType._def,r);case b.ZodFirstPartyTypeKind.ZodPipeline:if("input"===r.pipeStrategy)return D(e.in._def,r);if("output"===r.pipeStrategy)return D(e.out._def,r);let k=D(e.in._def,{...r,currentPath:[...r.currentPath,"allOf","0"]}),P=D(e.out._def,{...r,currentPath:[...r.currentPath,"allOf",k?"1":"0"]});return{allOf:[k,P].filter(e=>void 0!==e)};case b.ZodFirstPartyTypeKind.ZodFunction:case b.ZodFirstPartyTypeKind.ZodVoid:case b.ZodFirstPartyTypeKind.ZodSymbol:default:return}})(e,e.typeName,t),i="function"==typeof o?D(o(),t):o;if(i&&U(e,t,i),t.postProcess){let r=t.postProcess(i,e,t);return n.jsonSchema=i,r}return n.jsonSchema=i,i}let V=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:v(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),_(t);return"seen"===t.$refStrategy?_(t):void 0}},U=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r);var B={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},J={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},W={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},q={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},G={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},H=[B,J,W,q,G];B.code,J.code,W.code,q.code,G.code,B.name,B.code,J.name,J.code,W.name,W.code,q.name,q.code,G.name,G.code,H.map(e=>e.code);var Q=[{code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},{code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},{code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},{code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},{code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},{code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},{code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},{code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},{code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:NaN}),{type:"finish_message",value:t}}},{code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},{code:"f",name:"start_step",parse:e=>{if(null==e||"object"!=typeof e||!("messageId"in e)||"string"!=typeof e.messageId)throw Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},{code:"g",name:"reasoning",parse:e=>{if("string"!=typeof e)throw Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},{code:"h",name:"source",parse:e=>{if(null==e||"object"!=typeof e)throw Error('"source" parts expect a Source object.');return{type:"source",value:e}}},{code:"i",name:"redacted_reasoning",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data)throw Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},{code:"j",name:"reasoning_signature",parse:e=>{if(null==e||"object"!=typeof e||!("signature"in e)||"string"!=typeof e.signature)throw Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}}],X=Object.fromEntries(Q.map(e=>[e.code,e]));Object.fromEntries(Q.map(e=>[e.name,e.code]));var Y=Q.map(e=>e.code),ee=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let r=e.slice(0,t);if(!Y.includes(r))throw Error(`Failed to parse stream string. Invalid code ${r}.`);let a=JSON.parse(e.slice(t+1));return X[r].parse(a)};async function et({stream:e,onTextPart:t,onReasoningPart:r,onReasoningSignaturePart:a,onRedactedReasoningPart:n,onSourcePart:o,onDataPart:i,onErrorPart:s,onToolCallStreamingStartPart:l,onToolCallDeltaPart:u,onToolCallPart:c,onToolResultPart:d,onMessageAnnotationsPart:p,onFinishMessagePart:f,onFinishStepPart:m,onStartStepPart:y}){let g=e.getReader(),h=new TextDecoder,v=[],b=0;for(;;){let{value:e}=await g.read();if(e&&(v.push(e),b+=e.length,10!==e[e.length-1]))continue;if(0===v.length)break;let _=function(e,t){let r=new Uint8Array(t),a=0;for(let t of e)r.set(t,a),a+=t.length;return e.length=0,r}(v,b);for(let{type:e,value:g}of(b=0,h.decode(_,{stream:!0}).split("\n").filter(e=>""!==e).map(ee)))switch(e){case"text":await (null==t?void 0:t(g));break;case"reasoning":await (null==r?void 0:r(g));break;case"reasoning_signature":await (null==a?void 0:a(g));break;case"redacted_reasoning":await (null==n?void 0:n(g));break;case"source":await (null==o?void 0:o(g));break;case"data":await (null==i?void 0:i(g));break;case"error":await (null==s?void 0:s(g));break;case"message_annotations":await (null==p?void 0:p(g));break;case"tool_call_streaming_start":await (null==l?void 0:l(g));break;case"tool_call_delta":await (null==u?void 0:u(g));break;case"tool_call":await (null==c?void 0:c(g));break;case"tool_result":await (null==d?void 0:d(g));break;case"finish_message":await (null==f?void 0:f(g));break;case"finish_step":await (null==m?void 0:m(g));break;case"start_step":await (null==y?void 0:y(g));break;default:throw Error(`Unknown stream part type: ${e}`)}}}async function er({stream:e,onTextPart:t}){let r=e.pipeThrough(new TextDecoderStream).getReader();for(;;){let{done:e,value:a}=await r.read();if(e)break;await t(a)}}async function ea({api:e,prompt:t,credentials:r,headers:a,body:n,streamProtocol:o="data",setCompletion:i,setLoading:s,setError:l,setAbortController:u,onResponse:c,onFinish:d,onError:p,onData:f,fetch:m=fetch}){var y;try{s(!0),l(void 0);let p=new AbortController;u(p),i("");let g=await m(e,{method:"POST",body:JSON.stringify({prompt:t,...n}),credentials:r,headers:{"Content-Type":"application/json",...a},signal:p.signal}).catch(e=>{throw e});if(c)try{await c(g)}catch(e){throw e}if(!g.ok)throw Error(null!=(y=await g.text())?y:"Failed to fetch the chat response.");if(!g.body)throw Error("The response body is empty.");let h="";switch(o){case"text":await er({stream:g.body,onTextPart:e=>{h+=e,i(h)}});break;case"data":await et({stream:g.body,onTextPart(e){h+=e,i(h)},onDataPart(e){null==f||f(e)},onErrorPart(e){throw Error(e)}});break;default:throw Error(`Unknown stream protocol: ${o}`)}return d&&d(t,h),u(null),h}catch(e){if("AbortError"===e.name)return u(null),null;e instanceof Error&&p&&p(e),l(e)}finally{s(!1)}}Symbol.for("vercel.ai.schema");var en=e.i(658449);e.i(884605);var eo=e.i(99474);let ei=()=>{},es=ei(),el=Object,eu=e=>e===es,ec=(e,t)=>({...e,...t}),ed=new WeakMap,ep=0,ef=e=>{let t,r,a=typeof e,n=e&&e.constructor,o=n==Date;if(el(e)!==e||o||n==RegExp)t=o?e.toJSON():"symbol"==a?e.toString():"string"==a?JSON.stringify(e):""+e;else{if(t=ed.get(e))return t;if(t=++ep+"~",ed.set(e,t),n==Array){for(r=0,t="@";r<e.length;r++)t+=ef(e[r])+",";ed.set(e,t)}if(n==el){t="#";let a=el.keys(e).sort();for(;!eu(r=a.pop());)eu(e[r])||(t+=r+":"+ef(e[r])+",");ed.set(e,t)}}return t},em=new WeakMap,ey={},eg={},eh="undefined",ev=typeof window!=eh,eb=typeof document!=eh,e_=(e,t)=>{let r=em.get(e);return[()=>!eu(t)&&e.get(t)||ey,a=>{if(!eu(t)){let n=e.get(t);t in eg||(eg[t]=n),r[5](t,ec(n,a),n||ey)}},r[6],()=>!eu(t)&&t in eg?eg[t]:!eu(t)&&e.get(t)||ey]},ew=!0,[ek,eP]=ev&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[ei,ei],eT={initFocus:e=>(eb&&document.addEventListener("visibilitychange",e),ek("focus",e),()=>{eb&&document.removeEventListener("visibilitychange",e),eP("focus",e)}),initReconnect:e=>{let t=()=>{ew=!0,e()},r=()=>{ew=!1};return ek("online",t),ek("offline",r),()=>{eP("online",t),eP("offline",r)}}},ex=!en.default.useId,eZ=!ev||"Deno"in window,eA=eZ?en.useEffect:en.useLayoutEffect,eE="undefined"!=typeof navigator&&navigator.connection,eS=!eZ&&eE&&(["slow-2g","2g"].includes(eE.effectiveType)||eE.saveData),eF=e=>{if("function"==typeof e)try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?ef(e):"",t]},eO=0,ej=()=>++eO;async function eI(...e){let[t,r,a,n]=e,o=ec({populateCache:!0,throwOnError:!0},"boolean"==typeof n?{revalidate:n}:n||{}),i=o.populateCache,s=o.rollbackOnError,l=o.optimisticData,u=o.throwOnError;if("function"==typeof r){let e=[];for(let a of t.keys())!/^\$(inf|sub)\$/.test(a)&&r(t.get(a)._k)&&e.push(a);return Promise.all(e.map(c))}return c(r);async function c(r){let n,[c]=eF(r);if(!c)return;let[d,p]=e_(t,c),[f,m,y,g]=em.get(t),h=()=>{let e=f[c];return("function"==typeof o.revalidate?o.revalidate(d().data,r):!1!==o.revalidate)&&(delete y[c],delete g[c],e&&e[0])?e[0](2).then(()=>d().data):d().data};if(e.length<3)return h();let v=a,b=ej();m[c]=[b,0];let _=!eu(l),w=d(),k=w.data,P=w._c,T=eu(P)?k:P;if(_&&p({data:l="function"==typeof l?l(T,k):l,_c:T}),"function"==typeof v)try{v=v(T)}catch(e){n=e}if(v&&"function"==typeof v.then){let e;if(v=await v.catch(e=>{n=e}),b!==m[c][0]){if(n)throw n;return v}n&&_&&(e=n,"function"==typeof s?s(e):!1!==s)&&(i=!0,p({data:T,_c:es}))}if(i&&!n&&("function"==typeof i?p({data:i(v,T),error:es,_c:es}):p({data:v,error:es,_c:es})),m[c][1]=ej(),Promise.resolve(h()).then(()=>{p({_c:es})}),n){if(u)throw n;return}return v}}let eL=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},eN=(e,t)=>{if(!em.has(e)){let r=ec(eT,t),a={},n=eI.bind(es,e),o=ei,i={},s=(e,t)=>{let r=i[e]||[];return i[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},l=(t,r,a)=>{e.set(t,r);let n=i[t];if(n)for(let e of n)e(r,a)},u=()=>{if(!em.has(e)&&(em.set(e,[a,{},{},{},n,l,s]),!eZ)){let t=r.initFocus(setTimeout.bind(es,eL.bind(es,a,0))),n=r.initReconnect(setTimeout.bind(es,eL.bind(es,a,1)));o=()=>{t&&t(),n&&n(),em.delete(e)}}};return u(),[e,n,u,o]}return[e,em.get(e)[4]]},[eC,eM]=eN(new Map),eR=ec({onLoadingSlow:ei,onSuccess:ei,onError:ei,onErrorRetry:(e,t,r,a,n)=>{let o=r.errorRetryCount,i=n.retryCount,s=~~((Math.random()+.5)*(1<<(i<8?i:8)))*r.errorRetryInterval;(eu(o)||!(i>o))&&setTimeout(a,s,n)},onDiscarded:ei,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:eS?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:eS?5e3:3e3,compare:(e,t)=>ef(e)==ef(t),isPaused:()=>!1,cache:eC,mutate:eM,fallback:{}},{isOnline:()=>ew,isVisible:()=>{let e=eb&&document.visibilityState;return eu(e)||"hidden"!==e}}),e$=(e,t)=>{let r=ec(e,t);if(t){let{use:a,fallback:n}=e,{use:o,fallback:i}=t;a&&o&&(r.use=a.concat(o)),n&&i&&(r.fallback=ec(n,i))}return r},eK=(0,en.createContext)({}),ez=ev&&window.__SWR_DEVTOOLS_USE__,eD=(ez?window.__SWR_DEVTOOLS_USE__:[]).concat(e=>(t,r,a)=>{let n=r&&((...e)=>{let[a]=eF(t),[,,,n]=em.get(eC);if(a.startsWith("$inf$"))return r(...e);let o=n[a];return eu(o)?r(...e):(delete n[a],o)});return e(t,n,a)});ez&&(window.__SWR_DEVTOOLS_REACT__=en.default);let eV=en.default.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}),eU={dedupe:!0};el.defineProperty(e=>{let{value:t}=e,r=(0,en.useContext)(eK),a="function"==typeof t,n=(0,en.useMemo)(()=>a?t(r):t,[a,r,t]),o=(0,en.useMemo)(()=>a?n:e$(r,n),[a,r,n]),i=n&&n.provider,s=(0,en.useRef)(es);i&&!s.current&&(s.current=eN(i(o.cache||eC),n));let l=s.current;return l&&(o.cache=l[0],o.mutate=l[1]),eA(()=>{if(l)return l[2]&&l[2](),l[3]},[]),(0,en.createElement)(eK.Provider,ec(e,{value:o}))},"defaultValue",{value:eR});let eB=(r=(e,t,r)=>{let{cache:a,compare:n,suspense:o,fallbackData:i,revalidateOnMount:s,revalidateIfStale:l,refreshInterval:u,refreshWhenHidden:c,refreshWhenOffline:d,keepPreviousData:p}=r,[f,m,y,g]=em.get(a),[h,v]=eF(e),b=(0,en.useRef)(!1),_=(0,en.useRef)(!1),w=(0,en.useRef)(h),k=(0,en.useRef)(t),P=(0,en.useRef)(r),T=()=>P.current.isVisible()&&P.current.isOnline(),[x,Z,A,E]=e_(a,h),S=(0,en.useRef)({}).current,F=eu(i)?r.fallback[h]:i,O=(e,t)=>{for(let r in S)if("data"===r){if(!n(e[r],t[r])&&(!eu(e[r])||!n(K,t[r])))return!1}else if(t[r]!==e[r])return!1;return!0},j=(0,en.useMemo)(()=>{let e=!!h&&!!t&&(eu(s)?!P.current.isPaused()&&!o&&(!!eu(l)||l):s),r=t=>{let r=ec(t);return(delete r._k,e)?{isValidating:!0,isLoading:!0,...r}:r},a=x(),n=E(),i=r(a),u=a===n?i:r(n),c=i;return[()=>{let e=r(x());return O(e,c)?(c.data=e.data,c.isLoading=e.isLoading,c.isValidating=e.isValidating,c.error=e.error,c):(c=e,e)},()=>u]},[a,h]),I=(0,eo.useSyncExternalStore)((0,en.useCallback)(e=>A(h,(t,r)=>{O(r,t)||e()}),[a,h]),j[0],j[1]),L=!b.current,N=f[h]&&f[h].length>0,C=I.data,M=eu(C)?F:C,R=I.error,$=(0,en.useRef)(M),K=p?eu(C)?$.current:C:M,z=(!N||!!eu(R))&&(L&&!eu(s)?s:!P.current.isPaused()&&(o?!eu(M)&&l:eu(M)||l)),D=!!(h&&t&&L&&z),V=eu(I.isValidating)?D:I.isValidating,U=eu(I.isLoading)?D:I.isLoading,B=(0,en.useCallback)(async e=>{let t,a,o=k.current;if(!h||!o||_.current||P.current.isPaused())return!1;let i=!0,s=e||{},l=!y[h]||!s.dedupe,u=()=>ex?!_.current&&h===w.current&&b.current:h===w.current,c={isValidating:!1,isLoading:!1},d=()=>{Z(c)},p=()=>{let e=y[h];e&&e[1]===a&&delete y[h]},g={isValidating:!0};eu(x().data)&&(g.isLoading=!0);try{if(l&&(Z(g),r.loadingTimeout&&eu(x().data)&&setTimeout(()=>{i&&u()&&P.current.onLoadingSlow(h,r)},r.loadingTimeout),y[h]=[o(v),ej()]),[t,a]=y[h],t=await t,l&&setTimeout(p,r.dedupingInterval),!y[h]||y[h][1]!==a)return l&&u()&&P.current.onDiscarded(h),!1;c.error=es;let e=m[h];if(!eu(e)&&(a<=e[0]||a<=e[1]||0===e[1]))return d(),l&&u()&&P.current.onDiscarded(h),!1;let s=x().data;c.data=n(s,t)?s:t,l&&u()&&P.current.onSuccess(t,h,r)}catch(r){p();let e=P.current,{shouldRetryOnError:t}=e;!e.isPaused()&&(c.error=r,l&&u())&&(e.onError(r,h,e),(!0===t||"function"==typeof t&&t(r))&&(!P.current.revalidateOnFocus||!P.current.revalidateOnReconnect||T())&&e.onErrorRetry(r,h,e,e=>{let t=f[h];t&&t[0]&&t[0](3,e)},{retryCount:(s.retryCount||0)+1,dedupe:!0}))}return i=!1,d(),!0},[h,a]),J=(0,en.useCallback)((...e)=>eI(a,w.current,...e),[]);if(eA(()=>{k.current=t,P.current=r,eu(C)||($.current=C)}),eA(()=>{var e;let t;if(!h)return;let r=B.bind(es,eU),a=0,n=(e=(e,t={})=>{if(0==e){let e=Date.now();P.current.revalidateOnFocus&&e>a&&T()&&(a=e+P.current.focusThrottleInterval,r())}else if(1==e)P.current.revalidateOnReconnect&&T()&&r();else if(2==e)return B();else if(3==e)return B(t)},(t=f[h]||(f[h]=[])).push(e),()=>{let r=t.indexOf(e);r>=0&&(t[r]=t[t.length-1],t.pop())});if(_.current=!1,w.current=h,b.current=!0,Z({_k:v}),z)if(eu(M)||eZ)r();else ev&&typeof window.requestAnimationFrame!=eh?window.requestAnimationFrame(r):setTimeout(r,1);return()=>{_.current=!0,n()}},[h]),eA(()=>{let e;function t(){let t="function"==typeof u?u(x().data):u;t&&-1!==e&&(e=setTimeout(r,t))}function r(){!x().error&&(c||P.current.isVisible())&&(d||P.current.isOnline())?B(eU).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[u,c,d,h]),(0,en.useDebugValue)(K),o&&eu(M)&&h){if(!ex&&eZ)throw Error("Fallback data is required when using suspense in SSR.");k.current=t,P.current=r,_.current=!1;let e=g[h];if(eu(e)||eV(J(e)),eu(R)){let e=B(eU);eu(K)||(e.status="fulfilled",e.value=!0),eV(e)}else throw R}return{mutate:J,get data(){return S.data=!0,K},get error(){return S.error=!0,R},get isValidating(){return S.isValidating=!0,V},get isLoading(){return S.isLoading=!0,U}}},function(...e){let t=ec(eR,(0,en.useContext)(eK)),[a,n,o]="function"==typeof e[1]?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],i=e$(t,o),s=r,{use:l}=i,u=(l||[]).concat(eD);for(let e=u.length;e--;)s=u[e](s);return s(a,n||i.fetcher||null,i)});var eJ=e.i(561030);function eW(e,t){return null!=t?(0,eJ.default)(e,t):e}function eq({api:e="/api/completion",id:t,initialCompletion:r="",initialInput:a="",credentials:n,headers:o,body:i,streamProtocol:s="data",fetch:l,onResponse:u,onFinish:c,onError:d,experimental_throttle:p}={}){let f=(0,en.useId)(),m=t||f,{data:y,mutate:g}=eB([e,m],null,{fallbackData:r}),{data:h=!1,mutate:v}=eB([m,"loading"],null),{data:b,mutate:_}=eB([m,"streamData"],null),[w,k]=(0,en.useState)(void 0),[P,T]=(0,en.useState)(null),x=(0,en.useRef)({credentials:n,headers:o,body:i});(0,en.useEffect)(()=>{x.current={credentials:n,headers:o,body:i}},[n,o,i]);let Z=(0,en.useCallback)(async(t,r)=>ea({api:e,prompt:t,credentials:x.current.credentials,headers:{...x.current.headers,...null==r?void 0:r.headers},body:{...x.current.body,...null==r?void 0:r.body},streamProtocol:s,fetch:l,setCompletion:eW(e=>g(e,!1),p),onData:eW(e=>_([...null!=b?b:[],...null!=e?e:[]],!1),p),setLoading:v,setError:k,setAbortController:T,onResponse:u,onFinish:c,onError:d}),[g,v,e,x,T,u,c,d,k,b,s,l,_,p]),A=(0,en.useCallback)(()=>{P&&(P.abort(),T(null))},[P]),E=(0,en.useCallback)(e=>{g(e,!1)},[g]),S=(0,en.useCallback)(async(e,t)=>Z(e,t),[Z]),[F,O]=(0,en.useState)(a),j=(0,en.useCallback)(e=>{var t;return null==(t=null==e?void 0:e.preventDefault)||t.call(e),F?S(F):void 0},[F,S]),I=(0,en.useCallback)(e=>{O(e.target.value)},[O]);return{completion:y,complete:S,error:w,setCompletion:E,stop:A,input:F,setInput:O,handleInputChange:I,handleSubmit:j,isLoading:h,data:b}}e.s(["useCompletion",()=>eq],312531)}]);