(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,761002,e=>{"use strict";let t,n,r=Symbol.for("drizzle:entityKind");function s(e,t){if(!e||"object"!=typeof e)return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,r))throw Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(e).constructor;if(n)for(;n;){if(r in n&&n[r]===t[r])return!0;n=Object.getPrototypeOf(n)}return!1}Symbol.for("drizzle:hasOwnEntityKind");class i{static [r]="ColumnBuilder";config;constructor(e,t,n){this.config={name:e,keyAsName:""===e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){""===this.config.name&&(this.config.name=e)}}class o{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static [r]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}let a=Symbol.for("drizzle:Name");class l{static [r]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{let{name:t,columns:n,foreignColumns:r}=e();return{name:t,columns:n,foreignTable:r[0].table,foreignColumns:r}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new u(e,this)}}class u{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static [r]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),r=t.map(e=>e.name),s=n.map(e=>e.name),i=[this.table[a],...r,n[0].table[a],...s];return e??`${i.join("_")}_fk`}}function c(e,...t){return e(...t)}function d(e,t){return`${e[a]}_${t.join("_")}_unique`}class m{constructor(e,t){this.name=t,this.columns=e}static [r]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new g(e,this.columns,this.nullsNotDistinctConfig,this.name)}}class p{static [r]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new m(e,this.name)}}class g{constructor(e,t,n,r){this.table=e,this.columns=t,this.name=r??d(this.table,this.columns.map(e=>e.name)),this.nullsNotDistinct=n}static [r]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}function f(e,t,n){for(let r=t;r<e.length;r++){let s=e[r];if("\\"===s){r++;continue}if('"'===s)return[e.slice(t,r).replace(/\\/g,""),r+1];if(!n&&(","===s||"}"===s))return[e.slice(t,r).replace(/\\/g,""),r]}return[e.slice(t).replace(/\\/g,""),e.length]}class h extends i{foreignKeyConfigs=[];static [r]="PgColumnBuilder";array(e){return new N(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:r})=>c((n,r)=>{let s=new l(()=>({columns:[e],foreignColumns:[n()]}));return r.onUpdate&&s.onUpdate(r.onUpdate),r.onDelete&&s.onDelete(r.onDelete),s.build(t)},n,r))}buildExtraConfigColumn(e){return new I(e,this.config)}}class y extends o{constructor(e,t){t.uniqueName||(t.uniqueName=d(e,[t.name])),super(e,t),this.table=e}static [r]="PgColumn"}class I extends y{static [r]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class b{static [r]="IndexedColumn";constructor(e,t,n,r){this.name=e,this.keyAsName=t,this.type=n,this.indexConfig=r}name;keyAsName;type;indexConfig}class N extends h{static [r]="PgArrayBuilder";constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){let t=this.config.baseBuilder.build(e);return new S(e,this.config,t)}}class S extends y{constructor(e,t,n,r){super(e,t),this.baseColumn=n,this.range=r,this.size=t.size}size;static [r]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(e){return"string"==typeof e&&(e=function(e){let[t]=function e(t,n=0){let r=[],s=n,i=!1;for(;s<t.length;){let o=t[s];if(","===o){(i||s===n)&&r.push(""),i=!0,s++;continue}if(i=!1,"\\"===o){s+=2;continue}if('"'===o){let[e,n]=f(t,s+1,!0);r.push(e),s=n;continue}if("}"===o)return[r,s+1];if("{"===o){let[n,i]=e(t,s+1);r.push(n),s=i;continue}let[a,l]=f(t,s,!1);r.push(a),s=l}return[r,s]}(e,1);return t}(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(e,t=!1){let n=e.map(e=>null===e?null:s(this.baseColumn,S)?this.baseColumn.mapToDriverValue(e,!0):this.baseColumn.mapToDriverValue(e));return t?n:function e(t){return`{${t.map(t=>Array.isArray(t)?e(t):"string"==typeof t?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}(n)}}class x extends h{static [r]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new T(e,this.config)}}class T extends y{static [r]="PgBoolean";getSQLType(){return"boolean"}}function w(e){return new x(e??"")}class P extends h{static [r]="PgEnumObjectColumnBuilder";constructor(e,t){super(e,"string","PgEnumObjectColumn"),this.config.enum=t}build(e){return new v(e,this.config)}}class v extends y{static [r]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}}let C=Symbol.for("drizzle:isPgEnum");class A extends h{static [r]="PgEnumColumnBuilder";constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new D(e,this.config)}}class D extends y{static [r]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}}function j(e,t){var n;let r,s;return Array.isArray(t)?r=Object.assign(e=>new A(e??"",r),{enumName:e,enumValues:[...t],schema:void 0,[C]:!0}):(n=void 0,s=Object.assign(e=>new P(e??"",s),{enumName:e,enumValues:Object.values(t),schema:n,[C]:!0}))}class z{static [r]="Subquery";constructor(e,t,n,r=!1,s=[]){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:r,usedTables:s}}}class _ extends z{static [r]="WithSubquery"}let V=(e,r)=>t?(n||(n=t.trace.getTracer("drizzle-orm","0.44.5")),c((t,n)=>n.startActiveSpan(e,e=>{try{return r(e)}catch(n){throw e.setStatus({code:t.SpanStatusCode.ERROR,message:n instanceof Error?n.message:"Unknown error"}),n}finally{e.end()}}),t,n)):r(),B=Symbol.for("drizzle:ViewBaseConfig"),k=Symbol.for("drizzle:Schema"),F=Symbol.for("drizzle:Columns"),L=Symbol.for("drizzle:ExtraConfigColumns"),$=Symbol.for("drizzle:OriginalName"),M=Symbol.for("drizzle:BaseName"),q=Symbol.for("drizzle:IsAlias"),U=Symbol.for("drizzle:ExtraConfigBuilder"),E=Symbol.for("drizzle:IsDrizzleTable");class Q{static [r]="Table";static Symbol={Name:a,Schema:k,OriginalName:$,Columns:F,ExtraConfigColumns:L,BaseName:M,IsAlias:q,ExtraConfigBuilder:U};[a];[$];[k];[F];[L];[M];[q]=!1;[E]=!0;[U]=void 0;constructor(e,t,n){this[a]=this[$]=e,this[k]=t,this[M]=n}}function O(e){return"object"==typeof e&&null!==e&&E in e}class K{static [r]="FakePrimitiveParam"}class X{static [r]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new G([this])}}class G{constructor(e){for(const t of(this.queryChunks=e,e))if(s(t,Q)){const e=t[Q.Symbol.Schema];this.usedTables.push(void 0===e?t[Q.Symbol.Name]:e+"."+t[Q.Symbol.Name])}}static [r]="SQL";decoder=J;shouldInlineParams=!1;usedTables=[];append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return V("drizzle.buildSQL",t=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){let n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:r,escapeName:i,escapeParam:a,prepareTyping:l,inlineParams:u,paramStartIndex:c}=n;var d=e.map(e=>{if(s(e,X))return{sql:e.value.join(""),params:[]};if(s(e,R))return{sql:i(e.value),params:[]};if(void 0===e)return{sql:"",params:[]};if(Array.isArray(e)){let t=[new X("(")];for(let[n,r]of e.entries())t.push(r),n<e.length-1&&t.push(new X(", "));return t.push(new X(")")),this.buildQueryFromSourceParams(t,n)}if(s(e,G))return this.buildQueryFromSourceParams(e.queryChunks,{...n,inlineParams:u||e.shouldInlineParams});if(s(e,Q)){let t=e[Q.Symbol.Schema],n=e[Q.Symbol.Name];return{sql:void 0===t||e[q]?i(n):i(t)+"."+i(n),params:[]}}if(s(e,o)){let n=r.getColumnCasing(e);if("indexes"===t.invokeSource)return{sql:i(n),params:[]};let s=e.table[Q.Symbol.Schema];return{sql:e.table[q]||void 0===s?i(e.table[Q.Symbol.Name])+"."+i(n):i(s)+"."+i(e.table[Q.Symbol.Name])+"."+i(n),params:[]}}if(s(e,es)){let t=e[B].schema,n=e[B].name;return{sql:void 0===t||e[B].isAlias?i(n):i(t)+"."+i(n),params:[]}}if(s(e,H)){if(s(e.value,en))return{sql:a(c.value++,e),params:[e],typings:["none"]};let t=null===e.value?null:e.encoder.mapToDriverValue(e.value);if(s(t,G))return this.buildQueryFromSourceParams([t],n);if(u)return{sql:this.mapInlineParam(t,n),params:[]};let r=["none"];return l&&(r=[l(e.encoder)]),{sql:a(c.value++,t),params:[t],typings:r}}return s(e,en)?{sql:a(c.value++,e),params:[e],typings:["none"]}:s(e,G.Aliased)&&void 0!==e.fieldAlias?{sql:i(e.fieldAlias),params:[]}:s(e,z)?e._.isWith?{sql:i(e._.alias),params:[]}:this.buildQueryFromSourceParams([new X("("),e._.sql,new X(") "),new R(e._.alias)],n):e&&"function"==typeof e&&C in e&&!0===e[C]?e.schema?{sql:i(e.schema)+"."+i(e.enumName),params:[]}:{sql:i(e.enumName),params:[]}:null!=e&&"function"==typeof e.getSQL?e.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([e.getSQL()],n):this.buildQueryFromSourceParams([new X("("),e.getSQL(),new X(")")],n):u?{sql:this.mapInlineParam(e,n),params:[]}:{sql:a(c.value++,e),params:[e],typings:["none"]}});let m={sql:"",params:[]};for(let e of d)m.sql+=e.sql,m.params.push(...e.params),e.typings?.length&&(m.typings||(m.typings=[]),m.typings.push(...e.typings));return m}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){let n=e.toString();return"[object Object]"===n?t(JSON.stringify(e)):t(n)}throw Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return void 0===e?this:new G.Aliased(this,e)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class R{constructor(e){this.value=e}static [r]="Name";brand;getSQL(){return new G([this])}}let J={mapFromDriverValue:e=>e},W={mapToDriverValue:e=>e};({...J,...W});class H{constructor(e,t=W){this.value=e,this.encoder=t}static [r]="Param";brand;getSQL(){return new G([this])}}function Y(e,...t){let n=[];for(let[r,s]of((t.length>0||e.length>0&&""!==e[0])&&n.push(new X(e[0])),t.entries()))n.push(s,new X(e[r+1]));return new G(n)}(Z=Y||(Y={})).empty=function(){return new G([])},Z.fromList=function(e){return new G(e)},Z.raw=function(e){return new G([new X(e)])},Z.join=function(e,t){let n=[];for(let[r,s]of e.entries())r>0&&void 0!==t&&n.push(t),n.push(s);return new G(n)},Z.identifier=function(e){return new R(e)},Z.placeholder=function(e){return new en(e)},Z.param=function(e,t){return new H(e,t)};var Z,ee=G||(G={});class et{constructor(e,t){this.sql=e,this.fieldAlias=t}static [r]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new et(this.sql,this.fieldAlias)}}ee.Aliased=et;class en{constructor(e){this.name=e}static [r]="Placeholder";getSQL(){return new G([this])}}let er=Symbol.for("drizzle:IsDrizzleView");class es{static [r]="View";[B];[er]=!0;constructor({name:e,schema:t,selectedFields:n,query:r}){this[B]={name:e,originalName:e,schema:t,selectedFields:n,query:r,isExisting:!r,isAlias:!1}}getSQL(){return new G([this])}}o.prototype.getSQL=function(){return new G([this])},Q.prototype.getSQL=function(){return new G([this])},z.prototype.getSQL=function(){return new G([this])};class ei{constructor(e,t){this.unique=e,this.name=t}static [r]="PgIndexBuilderOn";on(...e){return new eo(e.map(e=>{if(s(e,G))return e;let t=new b(e.name,!!e.keyAsName,e.columnType,e.indexConfig);return e.indexConfig=JSON.parse(JSON.stringify(e.defaultConfig)),t}),this.unique,!1,this.name)}onOnly(...e){return new eo(e.map(e=>{if(s(e,G))return e;let t=new b(e.name,!!e.keyAsName,e.columnType,e.indexConfig);return e.indexConfig=e.defaultConfig,t}),this.unique,!0,this.name)}using(e,...t){return new eo(t.map(e=>{if(s(e,G))return e;let t=new b(e.name,!!e.keyAsName,e.columnType,e.indexConfig);return e.indexConfig=JSON.parse(JSON.stringify(e.defaultConfig)),t}),this.unique,!0,this.name,e)}}class eo{static [r]="PgIndexBuilder";config;constructor(e,t,n,r,s="btree"){this.config={name:r,columns:e,unique:t,only:n,method:s}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new ea(this.config,e)}}class ea{static [r]="PgIndex";config;constructor(e,t){this.config={...e,table:t}}}function el(e){return new ei(!1,e)}function eu(e){return new ei(!0,e)}class ec extends h{static [r]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class ed extends ec{static [r]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new em(e,this.config)}}class em extends y{static [r]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return"string"==typeof e?Number.parseInt(e):e}}function ep(e){return new ed(e??"")}class eg extends h{static [r]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new ef(e,this.config)}}class ef extends y{static [r]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}function eh(e){return new eg(e??"")}function ey(e,t){return{name:"string"==typeof e&&e.length>0?e:"",config:"object"==typeof e?e:t}}"undefined"==typeof TextDecoder||new TextDecoder;class eI extends ec{static [r]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new eb(e,this.config)}}class eb extends y{static [r]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class eN extends ec{static [r]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new eS(e,this.config)}}class eS extends y{static [r]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function ex(e,t){let{name:n,config:r}=ey(e,t);return"number"===r.mode?new eI(n):new eN(n)}class eT extends h{static [r]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new ew(e,this.config)}}class ew extends y{static [r]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class eP extends h{static [r]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new ev(e,this.config)}}class ev extends y{static [r]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function eC(e,t){let{name:n,config:r}=ey(e,t);return"number"===r.mode?new eT(n):new eP(n)}class eA extends h{static [r]="PgCharBuilder";constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new eD(e,this.config)}}class eD extends y{static [r]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function ej(e,t={}){let{name:n,config:r}=ey(e,t);return new eA(n,r)}class ez extends h{static [r]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new e_(e,this.config)}}class e_ extends y{static [r]="PgCidr";getSQLType(){return"cidr"}}function eV(e){return new ez(e??"")}class eB extends h{static [r]="PgCustomColumnBuilder";constructor(e,t,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=n}build(e){return new ek(e,this.config)}}class ek extends y{static [r]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}function eF(e){return(t,n)=>{let{name:r,config:s}=ey(t,n);return new eB(r,s,e)}}class eL extends h{static [r]="PgDateColumnBaseBuilder";defaultNow(){return this.default(Y`now()`)}}class e$ extends eL{static [r]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new eM(e,this.config)}}class eM extends y{static [r]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class eq extends eL{static [r]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new eU(e,this.config)}}class eU extends y{static [r]="PgDateString";getSQLType(){return"date"}}function eE(e,t){let{name:n,config:r}=ey(e,t);return r?.mode==="date"?new e$(n):new eq(n)}class eQ extends h{static [r]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new eO(e,this.config)}}class eO extends y{static [r]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return"string"==typeof e?Number.parseFloat(e):e}}function eK(e){return new eQ(e??"")}class eX extends h{static [r]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new eG(e,this.config)}}class eG extends y{static [r]="PgInet";getSQLType(){return"inet"}}function eR(e){return new eX(e??"")}class eJ extends h{static [r]="PgIntervalBuilder";constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new eW(e,this.config)}}class eW extends y{static [r]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}}function eH(e,t={}){let{name:n,config:r}=ey(e,t);return new eJ(n,r)}class eY extends h{static [r]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new eZ(e,this.config)}}class eZ extends y{static [r]="PgJson";constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}function e0(e){return new eY(e??"")}class e1 extends h{static [r]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new e8(e,this.config)}}class e8 extends y{static [r]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[t,n,r]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n),Number.parseFloat(r)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class e2 extends h{static [r]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new e4(e,this.config)}}class e4 extends y{static [r]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[t,n,r]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(n),c:Number.parseFloat(r)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function e6(e,t){let{name:n,config:r}=ey(e,t);return r?.mode&&"tuple"!==r.mode?new e2(n):new e1(n)}class e5 extends h{static [r]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new e3(e,this.config)}}class e3 extends y{static [r]="PgMacaddr";getSQLType(){return"macaddr"}}function e7(e){return new e5(e??"")}class e9 extends h{static [r]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new te(e,this.config)}}class te extends y{static [r]="PgMacaddr8";getSQLType(){return"macaddr8"}}function tt(e){return new e9(e??"")}class tn extends h{static [r]="PgNumericBuilder";constructor(e,t,n){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=n}build(e){return new tr(e,this.config)}}class tr extends y{static [r]="PgNumeric";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return"string"==typeof e?e:String(e)}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class ts extends h{static [r]="PgNumericNumberBuilder";constructor(e,t,n){super(e,"number","PgNumericNumber"),this.config.precision=t,this.config.scale=n}build(e){return new ti(e,this.config)}}class ti extends y{static [r]="PgNumericNumber";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class to extends h{static [r]="PgNumericBigIntBuilder";constructor(e,t,n){super(e,"bigint","PgNumericBigInt"),this.config.precision=t,this.config.scale=n}build(e){return new ta(e,this.config)}}class ta extends y{static [r]="PgNumericBigInt";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function tl(e,t){let{name:n,config:r}=ey(e,t),s=r?.mode;return"number"===s?new ts(n,r?.precision,r?.scale):"bigint"===s?new to(n,r?.precision,r?.scale):new tn(n,r?.precision,r?.scale)}class tu extends h{static [r]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new tc(e,this.config)}}class tc extends y{static [r]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){let[t,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class td extends h{static [r]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new tm(e,this.config)}}class tm extends y{static [r]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){let[t,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function tp(e,t){let{name:n,config:r}=ey(e,t);return r?.mode&&"tuple"!==r.mode?new td(n):new tu(n)}function tg(e,t){let n=new DataView(new ArrayBuffer(8));for(let r=0;r<8;r++)n.setUint8(r,e[t+r]);return n.getFloat64(0,!0)}function tf(e){let t=function(e){let t=[];for(let n=0;n<e.length;n+=2)t.push(Number.parseInt(e.slice(n,n+2),16));return new Uint8Array(t)}(e),n=0,r=t[0];n+=1;let s=new DataView(t.buffer),i=s.getUint32(n,1===r);if(n+=4,0x20000000&i&&(s.getUint32(n,1===r),n+=4),(65535&i)==1){let e=tg(t,n),r=tg(t,n+=8);return n+=8,[e,r]}throw Error("Unsupported geometry type")}class th extends h{static [r]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new ty(e,this.config)}}class ty extends y{static [r]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return tf(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class tI extends h{static [r]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new tb(e,this.config)}}class tb extends y{static [r]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let t=tf(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function tN(e,t){let{name:n,config:r}=ey(e,t);return r?.mode&&"tuple"!==r.mode?new tI(n):new th(n)}class tS extends h{static [r]="PgRealBuilder";constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new tx(e,this.config)}}class tx extends y{static [r]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>"string"==typeof e?Number.parseFloat(e):e}function tT(e){return new tS(e??"")}class tw extends h{static [r]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new tP(e,this.config)}}class tP extends y{static [r]="PgSerial";getSQLType(){return"serial"}}function tv(e){return new tw(e??"")}class tC extends ec{static [r]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new tA(e,this.config)}}class tA extends y{static [r]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>"string"==typeof e?Number(e):e}function tD(e){return new tC(e??"")}class tj extends h{static [r]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new tz(e,this.config)}}class tz extends y{static [r]="PgSmallSerial";getSQLType(){return"smallserial"}}function t_(e){return new tj(e??"")}class tV extends h{static [r]="PgTextBuilder";constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new tB(e,this.config)}}class tB extends y{static [r]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function tk(e,t={}){let{name:n,config:r}=ey(e,t);return new tV(n,r)}class tF extends eL{constructor(e,t,n){super(e,"string","PgTime"),this.withTimezone=t,this.precision=n,this.config.withTimezone=t,this.config.precision=n}static [r]="PgTimeBuilder";build(e){return new tL(e,this.config)}}class tL extends y{static [r]="PgTime";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`time${e}${this.withTimezone?" with time zone":""}`}}function t$(e,t={}){let{name:n,config:r}=ey(e,t);return new tF(n,r.withTimezone??!1,r.precision)}class tM extends eL{static [r]="PgTimestampBuilder";constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}build(e){return new tq(e,this.config)}}class tq extends y{static [r]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":` (${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class tU extends eL{static [r]="PgTimestampStringBuilder";constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}build(e){return new tE(e,this.config)}}class tE extends y{static [r]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}}function tQ(e,t={}){let{name:n,config:r}=ey(e,t);return r?.mode==="string"?new tU(n,r.withTimezone??!1,r.precision):new tM(n,r?.withTimezone??!1,r?.precision)}class tO extends h{static [r]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(Y`gen_random_uuid()`)}build(e){return new tK(e,this.config)}}class tK extends y{static [r]="PgUUID";getSQLType(){return"uuid"}}function tX(e){return new tO(e??"")}class tG extends h{static [r]="PgVarcharBuilder";constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new tR(e,this.config)}}class tR extends y{static [r]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function tJ(e,t={}){let{name:n,config:r}=ey(e,t);return new tG(n,r)}class tW extends h{static [r]="PgBinaryVectorBuilder";constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new tH(e,this.config)}}class tH extends y{static [r]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function tY(e,t){let{name:n,config:r}=ey(e,t);return new tW(n,r)}class tZ extends h{static [r]="PgHalfVectorBuilder";constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new t0(e,this.config)}}class t0 extends y{static [r]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function t1(e,t){let{name:n,config:r}=ey(e,t);return new tZ(n,r)}class t8 extends h{static [r]="PgSparseVectorBuilder";constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new t2(e,this.config)}}class t2 extends y{static [r]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function t4(e,t){let{name:n,config:r}=ey(e,t);return new t8(n,r)}class t6 extends h{static [r]="PgVectorBuilder";constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new t5(e,this.config)}}class t5 extends y{static [r]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function t3(e,t){let{name:n,config:r}=ey(e,t);return new t6(n,r)}let t7=Symbol.for("drizzle:PgInlineForeignKeys"),t9=Symbol.for("drizzle:EnableRLS");class ne extends Q{static [r]="PgTable";static Symbol=Object.assign({},Q.Symbol,{InlineForeignKeys:t7,EnableRLS:t9});[t7]=[];[t9]=!1;[Q.Symbol.ExtraConfigBuilder]=void 0;[Q.Symbol.ExtraConfigColumns]={}}let nt=(e,t,n)=>(function(e,t,n,r,s=e){let i=new ne(e,r,s),o="function"==typeof t?t({bigint:ex,bigserial:eC,boolean:w,char:ej,cidr:eV,customType:eF,date:eE,doublePrecision:eK,inet:eR,integer:ep,interval:eH,json:e0,jsonb:eh,line:e6,macaddr:e7,macaddr8:tt,numeric:tl,point:tp,geometry:tN,real:tT,serial:tv,smallint:tD,smallserial:t_,text:tk,time:t$,timestamp:tQ,uuid:tX,varchar:tJ,bit:tY,halfvec:t1,sparsevec:t4,vector:t3}):t,a=Object.fromEntries(Object.entries(o).map(([e,t])=>{t.setName(e);let n=t.build(i);return i[t7].push(...t.buildForeignKeys(n,i)),[e,n]})),l=Object.fromEntries(Object.entries(o).map(([e,t])=>(t.setName(e),[e,t.buildExtraConfigColumn(i)]))),u=Object.assign(i,a);return u[Q.Symbol.Columns]=a,u[Q.Symbol.ExtraConfigColumns]=l,n&&(u[ne.Symbol.ExtraConfigBuilder]=n),Object.assign(u,{enableRLS:()=>(u[ne.Symbol.EnableRLS]=!0,u)})})(e,t,n,void 0);function nn(...e){return e[0].columns?new nr(e[0].columns,e[0].name):new nr(e)}class nr{static [r]="PgPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new ns(e,this.columns,this.name)}}class ns{constructor(e,t,n){this.table=e,this.columns=t,this.name=n}static [r]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[ne.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}var ni=e.i(398228);e.i(902379),e.i(704956);var no=e.i(955190),no=no;let na={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:0xffffff,INT32_MIN:-0x80000000,INT32_MAX:0x7fffffff,INT32_UNSIGNED_MAX:0xffffffff,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-0x8000000000000000n,INT64_MAX:0x7fffffffffffffffn,INT64_UNSIGNED_MAX:0xffffffffffffffffn};function nl(e,t){return t.includes(e.columnType)}function nu(e){return"enumValues"in e&&Array.isArray(e.enumValues)&&e.enumValues.length>0}let nc=no.union([no.string(),no.number(),no.boolean(),no.null()]),nd=no.union([nc,no.record(no.string(),no.any()),no.array(no.any())]),nm=no.custom(e=>e instanceof ni.Buffer);function np(e){return O(e)?e[Q.Symbol.Columns]:e[B].selectedFields}let ng={never:()=>!1,optional:()=>!1,nullable:e=>!e.notNull},nf=(e,t)=>{if(nu(e))return((void 0)??no).enum(e.enumValues);return function e(t,n,r,i){let a={};for(let[l,u]of Object.entries(t)){if(!s(u,o)&&!s(u,G)&&!s(u,G.Aliased)&&"object"==typeof u){let t=O(u)||"object"==typeof u&&null!==u&&er in u?np(u):u;a[l]=e(t,n[l]??{},r,i);continue}let t=n[l];if(void 0!==t&&"function"!=typeof t){a[l]=t;continue}let c=s(u,o)?u:void 0,d=c?function e(t,n){let r,s=n?.zodInstance??no,i=n?.coerce??{};return nu(t)&&(r=t.enumValues.length?s.enum(t.enumValues):s.string()),r||(nl(t,["PgGeometry","PgPointTuple"])?r=s.tuple([s.number(),s.number()]):nl(t,["PgGeometryObject","PgPointObject"])?r=s.object({x:s.number(),y:s.number()}):nl(t,["PgHalfVector","PgVector"])?(r=s.array(s.number()),r=t.dimensions?r.length(t.dimensions):r):nl(t,["PgLine"])?r=s.tuple([s.number(),s.number(),s.number()]):nl(t,["PgLineABC"])?r=s.object({a:s.number(),b:s.number(),c:s.number()}):nl(t,["PgArray"])?(r=s.array(e(t.baseColumn,n)),r=t.size?r.length(t.size):r):"array"===t.dataType?r=s.array(s.any()):"number"===t.dataType?r=function(e,t,n){let r,s,i=e.getSQLType().includes("unsigned"),o=!1;nl(e,["MySqlTinyInt","SingleStoreTinyInt"])?(r=i?0:na.INT8_MIN,s=i?na.INT8_UNSIGNED_MAX:na.INT8_MAX,o=!0):nl(e,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(r=i?0:na.INT16_MIN,s=i?na.INT16_UNSIGNED_MAX:na.INT16_MAX,o=!0):nl(e,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(r=i?0:na.INT24_MIN,s=i?na.INT24_UNSIGNED_MAX:na.INT24_MAX,o=nl(e,["MySqlMediumInt","SingleStoreMediumInt"])):nl(e,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(r=i?0:na.INT32_MIN,s=i?na.INT32_UNSIGNED_MAX:na.INT32_MAX,o=!0):nl(e,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(r=i?0:na.INT48_MIN,s=i?na.INT48_UNSIGNED_MAX:na.INT48_MAX):nl(e,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=(i=i||nl(e,["MySqlSerial","SingleStoreSerial"]))?0:Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,o=!0):nl(e,["MySqlYear","SingleStoreYear"])?(r=1901,s=2155,o=!0):(r=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER);let a=!0===n||n?.number?o?t.coerce.number():t.coerce.number().int():o?t.int():t.number();return a.gte(r).lte(s)}(t,s,i):"bigint"===t.dataType?r=function(e,t,n){let r=e.getSQLType().includes("unsigned"),s=r?0n:na.INT64_MIN,i=r?na.INT64_UNSIGNED_MAX:na.INT64_MAX;return(!0===n||n?.bigint?t.coerce.bigint():t.bigint()).gte(s).lte(i)}(t,s,i):"boolean"===t.dataType?r=!0===i||i.boolean?s.coerce.boolean():s.boolean():"date"===t.dataType?r=!0===i||i.date?s.coerce.date():s.date():"string"===t.dataType?r=function(e,t,n){let r,s;if(nl(e,["PgUUID"]))return t.uuid();let i=!1;nl(e,["PgVarchar","SQLiteText"])?r=e.length:nl(e,["MySqlVarChar","SingleStoreVarChar"])?r=e.length??na.INT16_UNSIGNED_MAX:nl(e,["MySqlText","SingleStoreText"])&&(r="longtext"===e.textType?na.INT32_UNSIGNED_MAX:"mediumtext"===e.textType?na.INT24_UNSIGNED_MAX:"text"===e.textType?na.INT16_UNSIGNED_MAX:na.INT8_UNSIGNED_MAX),nl(e,["PgChar","MySqlChar","SingleStoreChar"])&&(r=e.length,i=!0),nl(e,["PgBinaryVector"])&&(s=/^[01]+$/,r=e.dimensions);let o=!0===n||n?.string?t.coerce.string():t.string();return o=s?o.regex(s):o,r&&i?o.length(r):r?o.max(r):o}(t,s,i):"json"===t.dataType?r=nd:"custom"===t.dataType?r=s.any():"buffer"===t.dataType&&(r=nm)),r||(r=s.any()),r}(c,i):no.any(),m="function"==typeof t?t(d):d;!r.never(c)&&(a[l]=m,c&&(r.nullable(c)&&(a[l]=a[l].nullable()),r.optional(c)&&(a[l]=a[l].optional())))}return no.object(a)}(np(e),t??{},ng)};class nh{constructor(e,t,n){this.sourceTable=e,this.referencedTable=t,this.relationName=n,this.referencedTableName=t[Q.Symbol.Name]}static [r]="Relation";referencedTableName;fieldName}class ny{constructor(e,t){this.table=e,this.config=t}static [r]="Relations"}class nI extends nh{constructor(e,t,n,r){super(e,t,n?.relationName),this.config=n,this.isNullable=r}static [r]="One";withFieldName(e){let t=new nI(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}}class nb extends nh{constructor(e,t,n){super(e,t,n?.relationName),this.config=n}static [r]="Many";withFieldName(e){let t=new nb(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}}function nN(e,t){return new ny(e,e=>Object.fromEntries(Object.entries(t(e)).map(([e,t])=>[e,t.withFieldName(e)])))}var nS=e.i(908431);e.i(168204);var nx=e.i(225695),nT=e.i(917675);let nw={createdAt:tQ("createdAt").defaultNow().notNull(),updatedAt:tQ("updatedAt").defaultNow(),deletedAt:tQ("deletedAt")},nP=nS.z.object({diff:nS.z.string().optional(),originalCode:nS.z.string(),findAndReplace:nS.z.string().optional()});nS.z.array(nS.z.object({searchValue:nS.z.string(),replaceValue:nS.z.string()})),nS.z.object({source:nS.z.string().optional(),sourceVersionKey:nS.z.custom(e=>void 0===e||"string"==typeof e&&e.startsWith("v_")).optional(),diffInfo:nS.z.object({type:nS.z.undefined(),...nP.shape}).or(nS.z.object({type:nS.z.literal("multi-file"),fileToDiffMap:nS.z.record(nS.z.string(),nP)})).optional(),remoteInfo:nS.z.object({originalSources:nS.z.record(nS.z.string(),nS.z.string()).optional(),accepted:nS.z.boolean().optional()}).optional(),resultId:nS.z.string().optional(),title:nS.z.string().optional(),lang:nS.z.string().optional(),lastError:nS.z.string().optional(),lastDeployedAt:nS.z.string().optional(),lastEditedAt:nS.z.string().optional(),externalMeta:nS.z.object({git:nS.z.object({ownerName:nS.z.string(),repoName:nS.z.string(),sha:nS.z.string(),ref:nS.z.string(),commitMessage:nS.z.string()}).optional(),deployment:nS.z.object({id:nS.z.string()}).optional()}).optional(),meta:nS.z.object({file:nS.z.string().optional(),url:nS.z.string().optional(),type:nS.z.string().optional(),project:nS.z.string().optional(),taskNameComplete:nS.z.string().optional(),taskNameActive:nS.z.string().optional(),title:nS.z.string().optional(),id:nS.z.string().optional(),sqlExecutionState:nS.z.enum(["applied","error","cancelled"]).optional()}).optional()}),nS.z.object({title:nS.z.string(),isMultiFile:nS.z.boolean().optional(),isAgentEnabled:nS.z.boolean().optional(),remote:nS.z.object({v:nS.z.enum(["1"]),tunnel:nS.z.string()}).optional(),gitDisableAutoCommit:nS.z.boolean().optional(),gitDisableAutoPull:nS.z.boolean().optional(),gitDisconnected:nS.z.boolean().optional(),from:nS.z.string().optional(),isFigmaChat:nS.z.boolean().optional(),tailwindV4Default:nS.z.boolean().optional(),context:nS.z.object({ai:nS.z.boolean().optional()}).optional(),completedSteps:nS.z.array(nS.z.string()).optional(),noindex:nS.z.boolean().optional()});let nv=nt("chats",{...nw,chatId:tk("chatId").primaryKey().notNull(),authorId:tk("authorId").notNull(),ownerId:tk("ownerId").notNull(),shareable:w("shareable").notNull().default(!1),projectId:tk("projectId"),designSystemId:tk("designSystemId"),metadata:eh("metadata").$type(),summary:tk("summary"),summaryLastMessageId:tk("summaryLastMessageId"),currentLeafMessageId:tk("currentLeafMessageId"),privacy:tk("privacy").$type().default("private"),vercelProjectId:tk("vercelProjectId")},e=>[el("chatsAuthorIdIndex").on(e.authorId),el("chatsProjectIdIndex").on(e.projectId),el("chatsOwnerIdUpdatedAtIndex").on(e.ownerId,e.deletedAt.desc().nullsFirst(),e.updatedAt.desc()).concurrently(),el("chatsVercelProjectIdIndex").on(e.vercelProjectId).where(Y`${e.vercelProjectId} IS NOT NULL`).concurrently()]),nC=nt("projects",{...nw,projectId:tk("projectId").primaryKey().notNull(),name:tk("name").notNull(),description:tk("description"),ownerId:tk("ownerId"),creatorId:tk("creatorId").notNull(),settings:eh("settings").$type(),privacy:tk("privacy").$type().default("private"),vercelProjectId:tk("vercelProjectId")},e=>[el("projectsOwnerIdIndex").on(e.ownerId),el("projectsCreatorIdIndex").on(e.creatorId).concurrently(),el("projectsVercelProjectIdIndex").on(e.vercelProjectId).where(Y`${e.vercelProjectId} IS NOT NULL`).concurrently()]),nA=nt("designSystems",{...nw,designSystemId:tk("designSystemId").primaryKey().notNull(),name:tk("name").notNull(),description:tk("description"),ownerId:tk("ownerId").notNull(),creatorId:tk("creatorId").notNull(),registryUrl:tk("registryUrl").notNull()},e=>[el("designSystemsOwnerIdIndex").on(e.ownerId)]);nN(nA,({many:e})=>({chats:e(nv)})),nN(nC,({one:e,many:t})=>({chats:t(nK),sources:t(nR),hasUserFavoritedProject:e(nH),permissions:t(re)}));let nD=nt("sources",{...nw,sourceId:tk("sourceId").primaryKey().notNull(),type:tk("type").$type().notNull(),title:tk("title"),description:tk("description"),url:tk("url"),content:tk("content"),metadata:eh("metadata").$type(),errorMessage:tk("errorMessage"),status:tk("status").$type().default("pending"),startedAt:tQ("startedAt"),finishedAt:tQ("finishedAt"),progress:tT("progress").default(0),textContentUrl:tk("textContentUrl")});nf(nD),nN(nD,({many:e})=>({projects:e(nR),chats:e(nG),messages:e(nX)})),nf(nv),nN(nv,({one:e,many:t})=>({messages:t(nB),summaryLastMessage:e(nB,{fields:[nv.summaryLastMessageId],references:[nB.messageId]}),blocks:t(nq),sources:t(nG),project:e(nK),designSystem:e(nA,{fields:[nv.designSystemId],references:[nA.designSystemId]}),userFavoritedChats:e(nW),permissions:t(re),template:e(n1,{fields:[nv.chatId],references:[n1.chatId]})}));let nj=j("messageType",nT.messageTypeEnumValues),nz="<|v0MessageContent|>",n_=eF({dataType:()=>"text",fromDriver(e){let t={version:1,parts:[{type:"mdx",content:e}]};if(!e.startsWith(nz))return t;try{let t=e.slice(nz.length);return nx.MessageContentServer.parse(JSON.parse(t))}catch{return t}},toDriver:e=>e.parts.every(({type:e})=>"mdx"===e)?(0,nx.stringifyMessageContent)(e,{filterTypes:["mdx"]}):`${nz}${JSON.stringify(e)}`}),nV=eF({dataType:()=>"jsonb",fromDriver:e=>e&&"completionTokens"in e?{outputTokens:e.completionTokens,inputTokens:e.promptTokens,totalTokens:e.totalTokens}:e,toDriver:e=>e}),nB=nt("messages",{...nw,messageId:tk("messageId").primaryKey().notNull(),chatId:tk("chatId").notNull(),content:n_("content").notNull(),ragSources:eh("sources").$type(),role:tJ("role",{length:255}).notNull().$type(),attachments:eh("attachments").$type(),finishReason:tk("finishReason").$type(),messageFeedback:eh("messageFeedback").$type(),parentId:tk("parentId"),type:nj("type").notNull(),modelId:tk("modelId").$type(),usage:nV("usage"),authorId:tk("authorId"),metadata:eh("metadata").$type()},e=>[el("messagesChatIdIndex").on(e.chatId),el("messagesAuthorIdIndex").on(e.authorId),el("messagesCreatedAtIndex").on(e.createdAt)]);nf(nB).shape.type,nN(nB,({one:e,many:t})=>({chat:e(nv,{fields:[nB.chatId],references:[nv.chatId]}),blocks:t(nq),feedback:t(nQ),parent:e(nB,{fields:[nB.parentId],references:[nB.messageId]}),summary:e(nL,{fields:[nB.messageId],references:[nL.messageId]}),sources:t(nX)}));let nk="v0 Summary URL: ",nF=eF({dataType:()=>"text",fromDriver:e=>e.startsWith(nk)?{type:"url",url:e.slice(nk.length)}:{type:"text",text:e},toDriver:e=>"url"===e.type?`${nk}${e.url}`:e.text}),nL=nt("chatMessageSummaries",{...nw,chatId:tk("chatId").notNull(),messageId:tk("messageId").notNull(),content:nF("content").notNull(),usage:eh("usage").$type()},e=>[el("chatMessageSummariesMessageIdIndex").on(e.messageId),eu("chatMessageSummariesUniqueIndex").on(e.chatId,e.messageId)]);nN(nL,({one:e})=>({chat:e(nv,{fields:[nL.chatId],references:[nv.chatId]}),message:e(nB,{fields:[nL.messageId],references:[nB.messageId]})}));let n$=eF({dataType:()=>"text",fromDriver:e=>"react-project"===e?"code-project":e}),nM=eF({dataType:()=>"jsonb",fromDriver:e=>(e.meta?.type==="react-project"&&(e.meta.type="code-project"),e)}),nq=nt("blocks",{...nw,blockId:tk("blockId").primaryKey().notNull(),blockType:n$("blockType").notNull(),chatId:tk("chatId").notNull(),messageId:tk("messageId").notNull(),data:nM("data"),removeBranding:w("removeBranding").notNull().default(!1),shared:w("shared").notNull().default(!1),forkedFromBlockId:tk("forkedFromBlockId"),isBlocked:w("isBlocked").default(!1),allowCrawling:w("allowCrawling"),hasSourceBeenEdited:w("hasSourceBeenEdited").default(!1),latestDeploymentInfo:eh("latestDeploymentInfo").$type(),templateVersionId:tk("templateVersionId"),templateCanonId:tk("templateCanonId"),nextLiteVersion:ep("nextLiteVersion")},e=>{var t;return[el("blocksChatIdIndex").on(e.chatId),el("blocksMessageIdIndex").on(e.messageId),el("blocksCreatedAtIndex").on(e.createdAt),el("blockId_lower_idx").on((t=e.blockId,Y`lower(${t})`))]});nf(nq),nN(nq,({one:e})=>({chat:e(nv,{fields:[nq.chatId],references:[nv.chatId]}),message:e(nB,{fields:[nq.messageId],references:[nB.messageId]}),forkedFromBlock:e(nq,{fields:[nq.forkedFromBlockId],references:[nq.blockId]}),subdomains:e(nJ),templateVersion:e(n0,{fields:[nq.templateVersionId],references:[n0.templateVersionId]}),template:e(n1,{fields:[nq.templateCanonId],references:[n1.templateCanonId]})}));let nU=j("status",["triage","corrected","external_fix","ignored","pending","assigned","resolved"]),nE=j("type",["upvote","downvote"]),nQ=nt("feedback",{type:nE("type").default("downvote").notNull(),feedbackId:tv("feedbackId").primaryKey(),messageId:tk("messageId").notNull(),leafMessageId:tk("leafMessageId"),submitterId:tk("submitterId"),reasons:tk("reasons").array().notNull(),freeform:tk("freeform").notNull(),quote:tk("quote"),status:nU("status").default("triage").notNull(),comment:tk("comment"),createdAt:tQ("createdAt").defaultNow().notNull(),updatedAt:tQ("updatedAt").defaultNow(),deletedAt:tQ("deletedAt"),correctionId:tk("correctionId"),categories:tk("categories").array().notNull().default(Y`'{}'::text[]`)});nN(nQ,({one:e})=>({message:e(nB,{fields:[nQ.messageId],references:[nB.messageId]}),correction:e(nO,{fields:[nQ.correctionId],references:[nO.correctionId]})}));let nO=nt("corrections",{correctionId:tk("correctionId").primaryKey().notNull(),feedbackId:ep("feedbackId"),correctorId:tk("correctorId"),messageId:tk("messageId"),prompt:tk("prompt").notNull(),response:tk("response").notNull(),promotedBlocks:tk("promotedBlocks").array().notNull(),suppressedBlocks:tk("suppressedBlocks").array().notNull(),promotedSources:tk("promotedSources").array().notNull(),suppressedSources:tk("suppressedSources").array().notNull(),status:tk("status").$type().default("unset").notNull(),approvedById:tk("approvedById"),approvedAt:tQ("approvedAt"),rejectionReason:tk("rejectionReason"),createdAt:tQ("createdAt").defaultNow().notNull(),updatedAt:tQ("updatedAt").defaultNow(),deletedAt:tQ("deletedAt")});nN(nO,({many:e,one:t})=>({feedback:e(nQ),message:t(nB,{fields:[nO.messageId],references:[nB.messageId]})}));let nK=nt("projectsAndChats",{project:tk("projectId"),chat:tk("chatId")},e=>[el("project_idx").on(e.project),eu("chat_idx").on(e.chat)]);nN(nK,({one:e})=>({project:e(nC,{fields:[nK.project],references:[nC.projectId]}),chat:e(nv,{fields:[nK.chat],references:[nv.chatId]})}));let nX=nt("messagesAndSources",{message:tk("messageId"),source:tk("sourceId")},e=>[el("messagesAndSources_message_idx").on(e.message),eu("messagesAndSources_source_idx").on(e.source)]),nG=nt("chatsAndSources",{chat:tk("chatId"),source:tk("sourceId")},e=>[el("chatsAndSources_chat_idx").on(e.chat),eu("chatsAndSources_source_idx").on(e.source)]),nR=nt("projectsAndSources",{project:tk("projectId"),source:tk("sourceId")},e=>[el("projectsAndSources_project_idx").on(e.project),eu("projectsAndSources_source_idx").on(e.source)]);nN(nX,({one:e})=>({message:e(nB,{fields:[nX.message],references:[nB.messageId]}),source:e(nD,{fields:[nX.source],references:[nD.sourceId]})})),nN(nG,({one:e})=>({chat:e(nv,{fields:[nG.chat],references:[nv.chatId]}),source:e(nD,{fields:[nG.source],references:[nD.sourceId]})})),nN(nR,({one:e})=>({project:e(nC,{fields:[nR.project],references:[nC.projectId]}),source:e(nD,{fields:[nR.source],references:[nD.sourceId]})}));let nJ=nt("subdomains",{blockId:tk("blockId").primaryKey().notNull(),subdomain:tk("subdomain").notNull().unique()});nN(nJ,({one:e})=>({block:e(nq,{fields:[nJ.blockId],references:[nq.blockId]})}));let nW=nt("userFavoritedChats",{userId:tk("userId").notNull(),chatId:tk("chatId").notNull(),favoritedAt:tQ("favoritedAt").defaultNow().notNull()},e=>[nn({columns:[e.userId,e.chatId]}),el("userFavoritedChats_chatId_idx").on(e.chatId)]);nN(nW,({one:e})=>({chat:e(nv,{fields:[nW.chatId],references:[nv.chatId]})}));let nH=nt("userFavoritedProjects",{userId:tk("userId").notNull(),projectId:tk("projectId").notNull(),favoritedAt:tQ("favoritedAt").defaultNow().notNull()},e=>[nn({columns:[e.userId,e.projectId]}),el("userFavoritedProjects_projectId_idx").on(e.projectId)]);nN(nH,({one:e})=>({projects:e(nC,{fields:[nH.projectId],references:[nC.projectId]})})),nt("integrations",{...nw,ownerId:tk("ownerId").notNull(),creatorId:tk("creatorId").notNull(),settings:eh("settings").$type(),accessToken:tk("accessToken").notNull(),refreshToken:tk("refreshToken"),tokenExpiresAt:tQ("tokenExpiresAt"),integrationUserId:tk("integrationUserId").notNull(),provider:tk("provider").$type().notNull()},e=>[nn({columns:[e.provider,e.ownerId,e.creatorId]}),el("integrations_integrationUserId_idx").on(e.integrationUserId)]),nt("apiKeys",{id:tk("id").primaryKey(),name:tk("name").notNull(),hashedKey:tk("hashedKey").notNull(),partialKey:tk("partialKey").notNull(),created:tQ("createdAt").defaultNow().notNull(),lastUsed:tQ("lastUsedAt"),ownerId:tk("ownerId").notNull(),creatorId:tk("creatorId").notNull()},e=>[el("apiKeys_hashedKey_idx").on(e.hashedKey)]);let nY=j("templateEventType",["fork"]),nZ=nt("templateEvents",{...nw,templateEventId:tk("templateEventId").primaryKey().notNull(),type:nY("type").notNull(),templateCanonId:tk("templateCanonId").notNull(),userId:tk("userId").notNull()},e=>[el("templateEvents_type_idx").on(e.type),el("templateEvents_templateCanonId_idx").on(e.templateCanonId)]);nf(nZ),nN(nZ,({one:e})=>({templateCanon:e(n1,{fields:[nZ.templateCanonId],references:[n1.templateCanonId]})}));let n0=nt("templateVersions",{...nw,templateVersionId:tk("templateVersionId").primaryKey().notNull(),templateCanonId:tk("templateCanonId").notNull(),blockId:tk("blockId").notNull(),publishedToCommunity:tk("templatePublishedToCommunity").$type().default("private"),title:tk("title").notNull(),description:tk("description"),imageUrl:tk("imageUrl"),envVarKeys:tk("envVarKeys").array().notNull().default(Y`'{}'::text[]`)},e=>[el("templatesBlockIdIndex").on(e.blockId),el("templateCanonId").on(e.blockId)]);nf(n0),nN(n0,({one:e})=>({block:e(nq,{fields:[n0.blockId],references:[nq.blockId]}),templateCanon:e(n1,{fields:[n0.templateCanonId],references:[n1.templateCanonId]})}));let n1=nt("templates",{...nw,templateCanonId:tk("templateCanonId").primaryKey().notNull(),templateVersionId:tk("templateVersionId").unique().notNull(),authorId:tk("authorId").notNull(),uses:ep("uses").default(0).notNull(),tags:tk("tags").array().notNull().default(Y`'{}'::text[]`),category:tk("category"),trendingScore:tT("trendingScore").default(0).notNull(),trendingScoreOffset:tT("trendingScoreOffset").default(0).notNull(),order:tT("order").default(0).notNull(),projectId:tk("projectId"),chatId:tk("chatId").unique(),title:tk("title"),description:tk("description"),imageUrl:tk("imageUrl"),keywords:tk("keywords"),visibility:tk("visibility").$type().default("public").notNull(),teamId:tk("teamId")},e=>[el("templatesUsesIndex").on(e.uses),el("templatesProjectIdIndex").on(e.projectId),el("templatesTeamIdIndex").on(e.teamId),el("templatesTitleIndex").on(e.title),el("templatesKeywordsIndex").on(e.keywords),eu("templatesChatIdUniqueIndex").on(e.chatId)]);nf(n1),nN(n1,({one:e,many:t})=>({templateVersion:e(n0,{fields:[n1.templateVersionId],references:[n0.templateVersionId]}),project:e(nC,{fields:[n1.projectId],references:[nC.projectId]}),likes:t(n8),chat:e(nv,{fields:[n1.chatId],references:[nv.chatId]})}));let n8=nt("templateLikes",{userId:tk("userId").notNull(),templateCanonId:tk("templateCanonId").notNull(),likedAt:tQ("likedAt").defaultNow().notNull()},e=>[nn({columns:[e.userId,e.templateCanonId]}),el("templateLikes_templateCanonId_idx").on(e.templateCanonId)]);nN(n8,({one:e})=>({templateCanon:e(n1,{fields:[n8.templateCanonId],references:[n1.templateCanonId]})}));let n2=nt("evalExperiments",{...nw,experimentId:tk("experimentId").primaryKey().notNull(),userId:tk("userId").notNull(),title:tk("title").notNull(),modelConfigA:eh("modelConfigA").notNull(),modelConfigB:eh("modelConfigB").notNull()}),n4=nt("experimentExamples",{...nw,exampleId:tk("exampleId").primaryKey().notNull(),experimentId:tk("experimentId").notNull(),urlA:tk("urlA").notNull(),urlB:tk("urlB").notNull()}),n6=j("voteChoice",["-2","-1","0","1","2"]),n5=nt("experimentVotes",{...nw,voteId:tk("voteId").primaryKey().notNull(),userId:tk("userId").notNull(),exampleId:tk("exampleId").notNull(),choice:n6("choice").notNull()}),n3=nt("evalExperimentPrompts",{...nw,promptId:tk("promptId").primaryKey().notNull(),label:tk("label").notNull(),value:tk("value").notNull()}),n7=nt("examplesAndPrompts",{exampleId:tk("exampleId").notNull(),promptId:tk("promptId").notNull()},e=>[nn({columns:[e.exampleId,e.promptId]}),el("examplesAndPrompts_example_idx").on(e.exampleId),el("examplesAndPrompts_prompt_idx").on(e.promptId)]);nN(n2,({many:e})=>({examples:e(n4)})),nN(n4,({one:e,many:t})=>({experiment:e(n2,{fields:[n4.experimentId],references:[n2.experimentId]}),votes:t(n5),prompts:t(n7)})),nN(n5,({one:e})=>({example:e(n4,{fields:[n5.exampleId],references:[n4.exampleId]})})),nN(n3,({many:e})=>({examples:e(n7)})),nN(n7,({one:e})=>({example:e(n4,{fields:[n7.exampleId],references:[n4.exampleId]}),prompt:e(n3,{fields:[n7.promptId],references:[n3.promptId]})}));let n9=j("integrationLinkSource",["settings","add-integration"]);nt("integrationLinks",{...nw,integrationLinkId:tk("integrationLinkId").primaryKey().notNull(),projectId:tk("projectId").notNull(),chatId:tk("chatId").notNull(),integrationId:tk("integrationId").notNull(),integrationName:tk("integrationName").notNull(),token:tk("token").notNull(),expiresAt:tQ("expiresAt").notNull(),connected:w("connected").default(!1).notNull(),source:n9("source").notNull(),messageId:tk("messageId")});let re=nt("permissions",{permissionId:tk("permissionId").primaryKey(),...nw,projectId:tk("projectId"),chatId:tk("chatId"),granteeType:tk("granteeType").$type().notNull(),granteeId:tk("granteeId").notNull(),permission:tk("permission").$type().notNull()},e=>[el("permissions_project_id_idx").on(e.projectId),el("permissions_chat_id_idx").on(e.chatId),el("permissions_grantee_idx").on(e.granteeType,e.granteeId)]);nN(re,({one:e})=>({project:e(nC,{fields:[re.projectId],references:[nC.projectId]}),chat:e(nv,{fields:[re.chatId],references:[nv.chatId]})})),nt("hooks",{...nw,hookId:tk("hookId").primaryKey().notNull(),chatId:tk("chatId"),ownerId:tk("ownerId").notNull(),name:tk("name").notNull(),events:tk("events").array().notNull().default(Y`'{}'::text[]`).$type(),url:tk("url").notNull()},e=>[el("hooks_ownerId_idx").on(e.ownerId)]),nt("hookEvents",{...nw,hookEventId:tk("hookEventId").primaryKey().notNull(),hookId:tk("hookId").notNull(),event:tk("event").notNull().$type(),status:tk("status").notNull().default("pending").$type()},e=>[el("hookEvents_hookId_idx").on(e.hookId)]),nt("teamSettings",{...nw,teamId:tk("teamId").primaryKey(),disablePublicSharing:w("disablePublicSharing").notNull().default(!1)}),e.s(["feedbackStatusEnum",0,nU,"feedbackTypeEnum",0,nE],761002)}]);