(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,92479,887968,227423,273207,819969,e=>{"use strict";e.s(["assertChatId",()=>Y,"useChatHashNavigation",()=>eo,"useChatId",()=>Z,"useChatLoadingState",()=>Q,"useChatMessages",()=>q,"useChatMessagesLength",()=>ee,"useChatPrefillOptions",()=>en,"useChatState",()=>X,"useChatSyncState",()=>ea,"useChatUndoState",()=>er,"useIsChatCreated",()=>et,"useSetChatState",()=>$],92479);var t,r=e.i(418625),a=e.i(15916),n=e.i(658449);let o={messages:[],isLoading:!1,lastSyncedAt:Date.now(),undo:null,activeForkKey:void 0,isContinuing:!1,isStreaming:!1,isAuthor:!1,isRestoring:!1};e.s(["CHAT_METADATA_FALLBACK",0,{title:"",isNew:!1,authorId:"",ownerId:"",tailwindV4Default:!1},"CHAT_STATE_FALLBACK",0,o],887968),e.s(["useLeafMessage",()=>F],273207);var s=e.i(767373),i=e.i(99474),l=e.i(999817),u=e.i(841953),d=e.i(964652),c=e.i(387575),h=e.i(775962),f=e.i(199352),p=e.i(731487),m=e.i(845027),g=e.i(860913),C=e.i(936413),b=e.i(179918),S=e.i(984379),v=e.i(62554),A=e.i(385956),y=e.i(495812),I=e.i(812053),E=e.i(234132),k=e.i(663917);let w=n.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),R={dedupe:!0};l.OBJECT.defineProperty(u.SWRConfig,"defaultValue",{value:d.defaultConfig});let T=(0,a.withArgs)((e,t,r)=>{let{cache:o,compare:s,suspense:l,fallbackData:u,revalidateOnMount:d,revalidateIfStale:T,refreshInterval:P,refreshWhenHidden:U,refreshWhenOffline:D,keepPreviousData:M}=r,[F,j,L,O]=c.SWRGlobalState.get(o),[_,N]=(0,h.serialize)(e),z=(0,n.useRef)(!1),V=(0,n.useRef)(!1),B=(0,n.useRef)(_),K=(0,n.useRef)(t),x=(0,n.useRef)(r),H=()=>x.current.isVisible()&&x.current.isOnline(),[W,G,J,Y]=(0,f.createCacheHelper)(o,_),Z=(0,n.useRef)({}).current,$=(0,p.isUndefined)(u)?(0,p.isUndefined)(r.fallback)?m.UNDEFINED:r.fallback[_]:u;$&&(0,g.isPromiseLike)($)&&($=w($));let X=(e,t)=>{for(let r in Z)if("data"===r){if(!s(e[r],t[r])&&(!(0,p.isUndefined)(e[r])||!s(es,t[r])))return!1}else if(t[r]!==e[r])return!1;return!0},q=(0,n.useMemo)(()=>{let e=!!_&&!!t&&((0,p.isUndefined)(d)?!x.current.isPaused()&&!l&&!1!==T:d),r=t=>{let r=(0,k.mergeObjects)(t);return(delete r._k,e)?{isValidating:!0,isLoading:!0,...r}:r},a=W(),n=Y(),o=r(a),s=a===n?o:r(n),i=o;return[()=>{let e=r(W());return X(e,i)?(i.data=e.data,i.isLoading=e.isLoading,i.isValidating=e.isValidating,i.error=e.error,i):(i=e,e)},()=>s]},[o,_]),Q=(0,i.useSyncExternalStore)((0,n.useCallback)(e=>J(_,(t,r)=>{X(r,t)||e()}),[o,_]),q[0],q[1]),ee=!z.current,et=F[_]&&F[_].length>0,er=Q.data,ea=(0,p.isUndefined)(er)?$:er,en=Q.error,eo=(0,n.useRef)(ea),es=M?(0,p.isUndefined)(er)?eo.current:er:ea,ei=(!et||!!(0,p.isUndefined)(en))&&(ee&&!(0,p.isUndefined)(d)?d:!x.current.isPaused()&&(l?!(0,p.isUndefined)(ea)&&T:(0,p.isUndefined)(ea)||T)),el=!!(_&&t&&ee&&ei),eu=(0,p.isUndefined)(Q.isValidating)?el:Q.isValidating,ed=(0,p.isUndefined)(Q.isLoading)?el:Q.isLoading,ec=(0,n.useCallback)(async e=>{let t,a,n=K.current;if(!_||!n||V.current||x.current.isPaused())return!1;let o=!0,i=e||{},l=!L[_]||!i.dedupe,u=()=>E.IS_REACT_LEGACY?!V.current&&_===B.current&&z.current:_===B.current,d={isValidating:!1,isLoading:!1},c=()=>{G(d)},h=()=>{let e=L[_];e&&e[1]===a&&delete L[_]},f={isValidating:!0};(0,p.isUndefined)(W().data)&&(f.isLoading=!0);try{if(l&&(G(f),r.loadingTimeout&&(0,p.isUndefined)(W().data)&&setTimeout(()=>{o&&u()&&x.current.onLoadingSlow(_,r)},r.loadingTimeout),L[_]=[n(N),(0,C.getTimestamp)()]),[t,a]=L[_],t=await t,l&&setTimeout(h,r.dedupingInterval),!L[_]||L[_][1]!==a)return l&&u()&&x.current.onDiscarded(_),!1;d.error=m.UNDEFINED;let e=j[_];if(!(0,p.isUndefined)(e)&&(a<=e[0]||a<=e[1]||0===e[1]))return c(),l&&u()&&x.current.onDiscarded(_),!1;let i=W().data;d.data=s(i,t)?i:t,l&&u()&&x.current.onSuccess(t,_,r)}catch(r){h();let e=x.current,{shouldRetryOnError:t}=e;!e.isPaused()&&(d.error=r,l&&u()&&(e.onError(r,_,e),(!0===t||(0,b.isFunction)(t)&&t(r))&&(!x.current.revalidateOnFocus||!x.current.revalidateOnReconnect||H())&&e.onErrorRetry(r,_,e,e=>{let t=F[_];t&&t[0]&&t[0](S.revalidateEvents.ERROR_REVALIDATE_EVENT,e)},{retryCount:(i.retryCount||0)+1,dedupe:!0})))}return o=!1,c(),!0},[_,o]),eh=(0,n.useCallback)((...e)=>(0,v.internalMutate)(o,B.current,...e),[]);if((0,A.useIsomorphicLayoutEffect)(()=>{K.current=t,x.current=r,(0,p.isUndefined)(er)||(eo.current=er)}),(0,A.useIsomorphicLayoutEffect)(()=>{if(!_)return;let e=ec.bind(m.UNDEFINED,R),t=0,r=(0,a.subscribeCallback)(_,F,(r,a={})=>{if(r==S.revalidateEvents.FOCUS_EVENT){let r=Date.now();x.current.revalidateOnFocus&&r>t&&H()&&(t=r+x.current.focusThrottleInterval,e())}else if(r==S.revalidateEvents.RECONNECT_EVENT)x.current.revalidateOnReconnect&&H()&&e();else if(r==S.revalidateEvents.MUTATE_EVENT)return ec();else if(r==S.revalidateEvents.ERROR_REVALIDATE_EVENT)return ec(a)});return V.current=!1,B.current=_,z.current=!0,G({_k:N}),ei&&((0,p.isUndefined)(ea)||y.IS_SERVER?e():(0,I.rAF)(e)),()=>{V.current=!0,r()}},[_]),(0,A.useIsomorphicLayoutEffect)(()=>{let e;function t(){let t=(0,b.isFunction)(P)?P(W().data):P;t&&-1!==e&&(e=setTimeout(r,t))}function r(){!W().error&&(U||x.current.isVisible())&&(D||x.current.isOnline())?ec(R).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[P,U,D,_]),(0,n.useDebugValue)(es),l&&(0,p.isUndefined)(ea)&&_){if(!E.IS_REACT_LEGACY&&y.IS_SERVER)throw Error("Fallback data is required when using Suspense in SSR.");K.current=t,x.current=r,V.current=!1;let e=O[_];if((0,p.isUndefined)(e)||w(eh(e)),(0,p.isUndefined)(en)){let e=ec(R);(0,p.isUndefined)(es)||(e.status="fulfilled",e.value=!0),w(e)}else throw en}return{mutate:eh,get data(){return Z.data=!0,es},get error(){return Z.error=!0,en},get isValidating(){return Z.isValidating=!0,eu},get isLoading(){return Z.isLoading=!0,ed}}}),P=E.IS_REACT_LEGACY?e=>{e()}:n.default.startTransition,U=(0,a.withMiddleware)(T,()=>(e,t,r={})=>{let{mutate:o}=(0,a.useSWRConfig)(),s=(0,n.useRef)(e),i=(0,n.useRef)(t),l=(0,n.useRef)(r),u=(0,n.useRef)(0),[d,c,f]=(e=>{let[,t]=(0,n.useState)({}),r=(0,n.useRef)(!1),a=(0,n.useRef)(e),o=(0,n.useRef)({data:!1,error:!1,isValidating:!1}),s=(0,n.useCallback)(e=>{let n=!1,s=a.current;for(let t in e)s[t]!==e[t]&&(s[t]=e[t],o.current[t]&&(n=!0));n&&!r.current&&t({})},[]);return(0,A.useIsomorphicLayoutEffect)(()=>(r.current=!1,()=>{r.current=!0})),[a,o.current,s]})({data:m.UNDEFINED,error:m.UNDEFINED,isMutating:!1}),p=d.current,g=(0,n.useCallback)(async(e,t)=>{let[r,a]=(0,h.serialize)(s.current);if(!i.current)throw Error("Can’t trigger the mutation: missing fetcher.");if(!r)throw Error("Can’t trigger the mutation: missing key.");let n=(0,k.mergeObjects)((0,k.mergeObjects)({populateCache:!1,throwOnError:!0},l.current),t),d=(0,C.getTimestamp)();u.current=d,f({isMutating:!0});try{let t=await o(r,i.current(a,{arg:e}),(0,k.mergeObjects)(n,{throwOnError:!0}));return u.current<=d&&(P(()=>f({data:t,isMutating:!1,error:void 0})),null==n.onSuccess||n.onSuccess.call(n,t,r,n)),t}catch(e){if(u.current<=d&&(P(()=>f({error:e,isMutating:!1})),null==n.onError||n.onError.call(n,e,r,n),n.throwOnError))throw e}},[]),b=(0,n.useCallback)(()=>{u.current=(0,C.getTimestamp)(),f({data:m.UNDEFINED,error:m.UNDEFINED,isMutating:!1})},[]);return(0,A.useIsomorphicLayoutEffect)(()=>{s.current=e,i.current=t,l.current=r}),{trigger:g,reset:b,get data(){return c.data=!0,p.data},get error(){return c.error=!0,p.error},get isMutating(){return c.isMutating=!0,p.isMutating}}});e.s(["default",()=>U],227423);let D={};async function M(e,{arg:t}){let r=(0,s.getLeafMessageIdFromForkKey)(t.activeForkKey);if(r)return fetch(e,{method:"POST",body:JSON.stringify({chatId:t.chatId,messageId:r})}).then(e=>e.json())}function F(){let{chatId:e}=Z(),{trigger:t}=U("/chat/api/chat/leaf",M),{data:a,mutate:o}=(0,r.default)(["chat:leaf:cache",e],null),s=(0,n.useCallback)(e=>{o(t=>{if(!e)return t;let r=!1,a={...t||D};for(let t of e)a[t]!==e&&(a[t]=e,r=!0);return r?a:t})},[o]);return{cacheForkKey:s,saveLeafMessageId:(0,n.useCallback)(({chatId:e,activeForkKey:r})=>{e&&t({chatId:e,activeForkKey:r})},[t]),forkKeyCache:a||D,switchForkKey:s}}var j=e.i(947936),L=e.i(726718);e.s(["getChatActions",()=>G,"getChatAtoms",()=>W,"getWritableChatAtoms",()=>x,"useCurrentChat",()=>J],819969);var O=e.i(9654),_=e.i(753533),N=e.i(142219),z=e.i(470259),V=e.i(452703),B=((t={})[t.Denied=0]="Denied",t[t.Allowed=1]="Allowed",t[t.AllowedPublic=2]="AllowedPublic",t[t.NotFound=3]="NotFound",t);let K=new Map,x=(0,_.cacheResultById)(K,()=>({isStreaming:(0,O.atom)(!1),isStreamingBlock:(0,O.atom)(!1),template:(0,O.atom)(null),attributes:(0,O.atom)({error:z.NOT_FOUND}),externalMeta:(0,O.atom)({error:z.NOT_FOUND}),latest:(0,O.atom)({error:z.NOT_FOUND})})),H=new Map,W=(0,_.cacheResultById)(H,e=>{let t=x(e);return{...t,deploymentState:(0,O.atom)(e=>{let r=e(t.externalMeta);if(r.error){if(r.error===z.MISSING_MFA_SCOPE)return"two-factor-error";if(r.error!==z.NOT_FOUND)return"error"}return r.deployment?(0,V.mapReadyStateToDeploymentState)(r.deployment.readyState):"not-deployed"}),isAuthor:(0,O.atom)(e=>{let r=e(t.attributes);return!("error"in r)&&r.isAuthor}),canWriteToChat:(0,O.atom)(e=>{let r=e(t.attributes);return!("error"in r)&&!!r.canWriteToChat}),projectProtection:(0,O.atom)(e=>{let r=e(t.attributes);return"error"in r||!r.project||!r.project.vercelProject?"public":r.project.vercelProject.project.passwordProtection?.deploymentType==="all"?"password":r.project.vercelProject.project.ssoProtection?.deploymentType==="all"?"team":"public"}),project:(0,O.atom)(e=>{let r=e(t.attributes);return"error"in r?null:r.project}),authorId:(0,O.atom)(e=>{let r=e(t.attributes);return"error"in r||!r.authorId?null:r.authorId}),title:(0,O.atom)(e=>{let r=e(t.attributes);return"error"in r||!r.title?null:r.title}),ownerId:(0,O.atom)(e=>{let r=e(t.attributes);return"error"in r||!r.ownerId?null:r.ownerId}),isTitleSameAsProject:(0,O.atom)(e=>{let r=e(t.attributes);return!("error"in r)&&!!r.project&&r.title===r.project.name})}});function G(e){let t=x(e);return{setIsStreaming:function(e){N.store.set(t.isStreaming,e)},setIsStreamingBlock:function(e){N.store.set(t.isStreamingBlock,e)},initializeNewChatState:function(){N.store.set(t.attributes,{designSystemId:null,title:void 0,access:B.Allowed,session:void 0,team:void 0,isAdmin:!1,isAuthor:!0,ownerId:void 0,authorId:void 0,canWriteToChat:!0,hasBlock:!1,tailwindV4Default:!0,project:null})},setChatTitle:function(e){let r=N.store.get(t.attributes);"error"in r||N.store.set(t.attributes,{...r,title:e})}}}function J(){let e=Y(Z().chatId);return{atoms:W(e),actions:G(e),chatId:e}}function Y(e){return e??"_no_chat_"}function Z(){let{data:e,mutate:t}=(0,r.default)("chat:id"),a=(0,j.usePathname)();return(0,n.useEffect)(()=>{(0,L.getChatIdFromPathname)(a)||t(void 0,!1)},[a,t]),{chatId:e}}function $(){let{chatId:e}=Z(),{setIsStreaming:t}=G(e??"no_chat"),{saveLeafMessageId:r,cacheForkKey:s}=F(),{mutate:i}=(0,a.useSWRConfig)();return(0,n.useCallback)(a=>{i(["chat:state",e],n=>{let i=n??o;return(i.activeForkKey&&s(i.activeForkKey),"function"==typeof a)?{...i,...a(i)}:(a.activeForkKey&&a.saveLeafMessageId&&e&&(delete a.saveLeafMessageId,r({chatId:e,activeForkKey:a.activeForkKey})),t(a.isStreaming??!1),{...i,...a})})},[i,e,t,s,r])}function X(){let e=Y(Z().chatId),{data:t}=(0,r.default)(["chat:state",e]);return{...t??o,chatId:e}}function q(){let e=Y(Z().chatId),{data:t}=(0,r.default)(["chat:state",e]);return(0,n.useMemo)(()=>{let r=t??o;return{messages:r.messages,activeForkKey:r.activeForkKey,chatId:e}},[t?.messages,t?.activeForkKey,e])}function Q(){let e=Y(Z().chatId),{data:t}=(0,r.default)(["chat:state",e]);return(0,n.useMemo)(()=>{let r=t??o;return{isLoading:r.isLoading,isStreaming:r.isStreaming,isSyncing:r.isSyncing,isContinuing:r.isContinuing,isRestoring:r.isRestoring,initialStreamPromise:r.initialStreamPromise,chatId:e}},[t?.isLoading,t?.isStreaming,t?.isSyncing,t?.isContinuing,t?.isRestoring,t?.initialStreamPromise,e])}function ee(){let e=Y(Z().chatId),{data:t}=(0,r.default)(["chat:state",e]),a=(0,n.useRef)(void 0);return(0,n.useMemo)(()=>{let r=(t?.messages??o.messages).length;return a.current&&a.current.messagesLength===r&&a.current.chatId===e||(a.current={messagesLength:r,chatId:e}),a.current},[t?.messages.length,e])}function et(){let{messagesLength:e}=ee();return{isChatCreated:(0,n.useMemo)(()=>e>1,[e])}}function er(){let e=Y(Z().chatId),{data:t}=(0,r.default)(["chat:state",e]);return(0,n.useMemo)(()=>({undo:(t??o).undo,chatId:e}),[t?.undo,e])}function ea(){let e=Y(Z().chatId),{data:t}=(0,r.default)(["chat:state",e]);return(0,n.useMemo)(()=>({lastSyncedAt:(t??o).lastSyncedAt,chatId:e}),[t?.lastSyncedAt,e])}function en(){let e=Y(Z().chatId),{data:t}=(0,r.default)(["chat:state",e]);return(0,n.useMemo)(()=>({prefillOptions:(t??o).prefillOptions,chatId:e}),[t?.prefillOptions,e])}function eo(){let e=Y(Z().chatId),{data:t}=(0,r.default)(["chat:state",e]);return(0,n.useMemo)(()=>({hashMessageId:(t??o).hashMessageId,chatId:e}),[t?.hashMessageId,e])}},75356,e=>{"use strict";e.s(["PROJECT_PAGE_SIZE",0,24])},443324,(e,t,r)=>{var a=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",a={};function n(e,t){if(!a[e]){a[e]={};for(var r=0;r<e.length;r++)a[e][e.charAt(r)]=r}return a[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var r=o._compress(e,6,function(e){return t.charAt(e)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,function(r){return n(t,e.charAt(r))})},compressToUTF16:function(t){return null==t?"":o._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=o.compress(e),r=new Uint8Array(2*t.length),a=0,n=t.length;a<n;a++){var s=t.charCodeAt(a);r[2*a]=s>>>8,r[2*a+1]=s%256}return r},decompressFromUint8Array:function(t){if(null==t)return o.decompress(t);for(var r=Array(t.length/2),a=0,n=r.length;a<n;a++)r[a]=256*t[2*a]+t[2*a+1];var s=[];return r.forEach(function(t){s.push(e(t))}),o.decompress(s.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,function(e){return r.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,function(t){return n(r,e.charAt(t))}))},compress:function(t){return o._compress(t,16,function(t){return e(t)})},_compress:function(e,t,r){if(null==e)return"";var a,n,o,s={},i={},l="",u="",d="",c=2,h=3,f=2,p=[],m=0,g=0;for(o=0;o<e.length;o+=1)if(l=e.charAt(o),Object.prototype.hasOwnProperty.call(s,l)||(s[l]=h++,i[l]=!0),u=d+l,Object.prototype.hasOwnProperty.call(s,u))d=u;else{if(Object.prototype.hasOwnProperty.call(i,d)){if(256>d.charCodeAt(0)){for(a=0;a<f;a++)m<<=1,g==t-1?(g=0,p.push(r(m)),m=0):g++;for(a=0,n=d.charCodeAt(0);a<8;a++)m=m<<1|1&n,g==t-1?(g=0,p.push(r(m)),m=0):g++,n>>=1}else{for(a=0,n=1;a<f;a++)m=m<<1|n,g==t-1?(g=0,p.push(r(m)),m=0):g++,n=0;for(a=0,n=d.charCodeAt(0);a<16;a++)m=m<<1|1&n,g==t-1?(g=0,p.push(r(m)),m=0):g++,n>>=1}0==--c&&(c=Math.pow(2,f),f++),delete i[d]}else for(a=0,n=s[d];a<f;a++)m=m<<1|1&n,g==t-1?(g=0,p.push(r(m)),m=0):g++,n>>=1;0==--c&&(c=Math.pow(2,f),f++),s[u]=h++,d=String(l)}if(""!==d){if(Object.prototype.hasOwnProperty.call(i,d)){if(256>d.charCodeAt(0)){for(a=0;a<f;a++)m<<=1,g==t-1?(g=0,p.push(r(m)),m=0):g++;for(a=0,n=d.charCodeAt(0);a<8;a++)m=m<<1|1&n,g==t-1?(g=0,p.push(r(m)),m=0):g++,n>>=1}else{for(a=0,n=1;a<f;a++)m=m<<1|n,g==t-1?(g=0,p.push(r(m)),m=0):g++,n=0;for(a=0,n=d.charCodeAt(0);a<16;a++)m=m<<1|1&n,g==t-1?(g=0,p.push(r(m)),m=0):g++,n>>=1}0==--c&&(c=Math.pow(2,f),f++),delete i[d]}else for(a=0,n=s[d];a<f;a++)m=m<<1|1&n,g==t-1?(g=0,p.push(r(m)),m=0):g++,n>>=1;0==--c&&(c=Math.pow(2,f),f++)}for(a=0,n=2;a<f;a++)m=m<<1|1&n,g==t-1?(g=0,p.push(r(m)),m=0):g++,n>>=1;for(;;){if(m<<=1,g==t-1){p.push(r(m));break}g++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,r,a){var n,o,s,i,l,u,d,c=[],h=4,f=4,p=3,m="",g=[],C={val:a(0),position:r,index:1};for(n=0;n<3;n+=1)c[n]=n;for(s=0,l=4,u=1;u!=l;)i=C.val&C.position,C.position>>=1,0==C.position&&(C.position=r,C.val=a(C.index++)),s|=(i>0)*u,u<<=1;switch(s){case 0:for(s=0,l=256,u=1;u!=l;)i=C.val&C.position,C.position>>=1,0==C.position&&(C.position=r,C.val=a(C.index++)),s|=(i>0)*u,u<<=1;d=e(s);break;case 1:for(s=0,l=65536,u=1;u!=l;)i=C.val&C.position,C.position>>=1,0==C.position&&(C.position=r,C.val=a(C.index++)),s|=(i>0)*u,u<<=1;d=e(s);break;case 2:return""}for(c[3]=d,o=d,g.push(d);;){if(C.index>t)return"";for(s=0,l=Math.pow(2,p),u=1;u!=l;)i=C.val&C.position,C.position>>=1,0==C.position&&(C.position=r,C.val=a(C.index++)),s|=(i>0)*u,u<<=1;switch(d=s){case 0:for(s=0,l=256,u=1;u!=l;)i=C.val&C.position,C.position>>=1,0==C.position&&(C.position=r,C.val=a(C.index++)),s|=(i>0)*u,u<<=1;c[f++]=e(s),d=f-1,h--;break;case 1:for(s=0,l=65536,u=1;u!=l;)i=C.val&C.position,C.position>>=1,0==C.position&&(C.position=r,C.val=a(C.index++)),s|=(i>0)*u,u<<=1;c[f++]=e(s),d=f-1,h--;break;case 2:return g.join("")}if(0==h&&(h=Math.pow(2,p),p++),c[d])m=c[d];else{if(d!==f)return null;m=o+o.charAt(0)}g.push(m),c[f++]=o+m.charAt(0),h--,o=m,0==h&&(h=Math.pow(2,p),p++)}}};return o}();if("function"==typeof define&&define.amd)e.r,void 0!==a&&e.v(a);else null!=t?t.exports=a:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return a})},254211,941813,569543,e=>{"use strict";var t=e.i(9654);e.s(["MAX_FAVORITES",0,10,"MAX_RECENT_CHATS",0,50,"MAX_SHARED_CHATS",0,10],941813);var r=e.i(75356),a=e.i(443324),n=e.i(908431),o=e.i(917675);let s=n.z.object({webSearch:n.z.boolean(),generateImages:n.z.boolean(),designSystemId:n.z.string().nullable().default(null),customInstructionIds:n.z.array(n.z.string()).default([])}),i=n.z.object({lastUpdated:n.z.number()}),l={lastUpdated:I()},u=n.z.object({sidebarRecentChatsSkeleton:n.z.number(),sidebarSharedChatsSkeleton:n.z.number(),sidebarFavoriteChatsAndProjectsSkeleton:n.z.number(),sidebarRecentChatsCollapsed:n.z.boolean(),sidebarSharedChatsCollapsed:n.z.boolean(),sidebarFavoriteChatsAndProjectsCollapsed:n.z.boolean(),projectsSkeleton:n.z.number(),lastUpdated:n.z.number()}),d={sidebarRecentChatsSkeleton:Math.floor(25),sidebarSharedChatsSkeleton:Math.floor(5),sidebarFavoriteChatsAndProjectsSkeleton:Math.floor(10),sidebarRecentChatsCollapsed:!1,sidebarSharedChatsCollapsed:!1,sidebarFavoriteChatsAndProjectsCollapsed:!1,projectsSkeleton:r.PROJECT_PAGE_SIZE,lastUpdated:I()},c=n.z.enum(["build","ask"]),h=n.z.object({ratio:n.z.number(),visible:n.z.boolean().default(!0),savedRatio:n.z.number().optional(),savedVisibility:n.z.boolean().optional()}),f="input",p="output",m=h.extend({id:n.z.literal(f)}),g=h.extend({id:n.z.literal(p)}),C=n.z.union([m,g]),b=n.z.object({sidebarCollapsed:n.z.boolean(),lastUpdated:n.z.number(),modelConfiguration:o.ModelConfigurationSchema,toolConfiguration:s,messageMode:c,shouldShowUpgrade:n.z.boolean().default(!1),chatPanelLayout:n.z.array(C),chatMobilePanel:n.z.enum([f,p]),dismissedFeatureDialogs:n.z.record(n.z.string(),n.z.boolean()).default({})}),S={sidebarCollapsed:!1,lastUpdated:I(),modelConfiguration:{modelId:"v0-1.5-md",thinking:!1,imageGenerations:!1},toolConfiguration:{webSearch:!0,generateImages:!0,designSystemId:null,customInstructionIds:[]},messageMode:"build",shouldShowUpgrade:!1,chatMobilePanel:f,chatPanelLayout:[{id:f,ratio:.3,visible:!0},{id:p,ratio:.7,visible:!0}],dismissedFeatureDialogs:{}},v={chat:{schema:i,keyedSchema:n.z.record(n.z.string(),i),cookieKey:"v0-durable-chat-state"},scoped:{schema:u,keyedSchema:n.z.record(n.z.string(),u),cookieKey:"v0-durable-scoped-state"},root:{schema:b,keyedSchema:n.z.object({root:b}),cookieKey:"v0-durable-root-state"}};function A(e,t){try{if(!t)return null;let r=(0,a.decompressFromBase64)(t);if(!r)return null;let n=JSON.parse(r),o=e.safeParse(n);if(!o.success)throw Error("Invalid durable state",{cause:o.error});return o.data}catch(e){return console.warn("Error parsing durable state cookie:",e),null}}function y(e){return(0,a.compressToBase64)(JSON.stringify(e))}function I(){let e=new Date,t=e.getFullYear()%100,r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),n=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0");return parseInt(`${t}${r}${a}${n}${o}`)}function E(e,t){return e-t}e.s(["CHAT_INPUT_PANEL_ID",0,f,"CHAT_OUTPUT_PANEL_ID",0,p,"DEFAULT_DURABLE_CHAT_STATE",0,l,"DEFAULT_DURABLE_ROOT_STATE",0,S,"DEFAULT_DURABLE_SCOPED_STATE",0,d,"DURABLE_STORES",0,v,"compareCompactTimestamps",()=>E,"compressDurableState",()=>y,"getCurrentCompactTimestamp",()=>I,"parseDurableStateCookie",()=>A],569543);var k=e.i(753533),w=e.i(142219),R=e.i(162061);function T(e){let t=v[e],r=R.default.get(t.cookieKey);return A(t.keyedSchema,r)}function P(e,t,r){let a={...T(e),...{[t]:r}},n=y(a);for(;n.length>2048&&Object.keys(a).length>0;){let e=Object.entries(a).sort(([,e],[,t])=>e.lastUpdated-t.lastUpdated).map(([e])=>e)[0]??null;if(!e)break;delete a[e],n=y(a)}R.default.set(v[e].cookieKey,n,{expires:365})}let U={chat:new Map,scoped:new Map,root:new Map},D=(0,k.cacheResultById)(U.chat,e=>{let r=M(e),a=(0,t.atom)(r.lastUpdated,(t,r,n)=>{let o;o=M(e),P("chat",e,{...o,lastUpdated:n,lastUpdated:I()}),r(a,n)});return{lastUpdated:a}});function M(e,t){var r;let a;if(t&&e in t){let r=t[e];if(r)return r}let n=function(e){let t=T("chat");if(t&&e in t){let r=t[e];if(r)return r}return null}(e);if(n)return n;let o=(r=e,(a=U.chat.get(r))?{lastUpdated:w.store.get(a.lastUpdated)}:null);return o?(P("chat",e,o),o):(P("chat",e,l),l)}let F=(0,k.cacheResultById)(U.scoped,e=>{let r=j(e);function a(e,t,r){let a=j(e);P("scoped",e,{...a,[t]:r,lastUpdated:I()})}let n=(0,t.atom)(r.sidebarRecentChatsSkeleton,(t,r,o)=>{a(e,"sidebarRecentChatsSkeleton",o),r(n,o)}),o=(0,t.atom)(r.sidebarSharedChatsSkeleton,(t,r,n)=>{a(e,"sidebarSharedChatsSkeleton",n),r(o,n)}),s=(0,t.atom)(r.sidebarFavoriteChatsAndProjectsSkeleton,(t,r,n)=>{a(e,"sidebarFavoriteChatsAndProjectsSkeleton",n),r(s,n)}),i=(0,t.atom)(r.sidebarRecentChatsCollapsed,(t,r,n)=>{a(e,"sidebarRecentChatsCollapsed",n),r(i,n)}),l=(0,t.atom)(r.sidebarSharedChatsCollapsed,(t,r,n)=>{a(e,"sidebarSharedChatsCollapsed",n),r(l,n)}),u=(0,t.atom)(r.sidebarFavoriteChatsAndProjectsCollapsed,(t,r,n)=>{a(e,"sidebarFavoriteChatsAndProjectsCollapsed",n),r(u,n)}),d=(0,t.atom)(r.projectsSkeleton,(t,r,n)=>{a(e,"projectsSkeleton",n),r(d,n)}),c=(0,t.atom)(r.lastUpdated,(t,r,n)=>{a(e,"lastUpdated",n),r(c,n)});return{sidebarRecentChatsSkeleton:n,sidebarSharedChatsSkeleton:o,sidebarFavoriteChatsAndProjectsSkeleton:s,sidebarRecentChatsCollapsed:i,sidebarSharedChatsCollapsed:l,sidebarFavoriteChatsAndProjectsCollapsed:u,projectsSkeleton:d,lastUpdated:c}});function j(e,t){if(t&&e in t){let r=t[e];if(r)return r}let r=function(e){let t=T("scoped");if(t&&e in t){let r=t[e];if(r)return r}return null}(e);if(r)return r;let a=function(e){let t=U.scoped.get(e);if(!t)return null;let r=w.store.get(t.sidebarRecentChatsSkeleton),a=w.store.get(t.sidebarSharedChatsSkeleton),n=w.store.get(t.sidebarFavoriteChatsAndProjectsSkeleton),o=w.store.get(t.sidebarRecentChatsCollapsed),s=w.store.get(t.sidebarSharedChatsCollapsed),i=w.store.get(t.sidebarFavoriteChatsAndProjectsCollapsed);return{sidebarRecentChatsSkeleton:r,sidebarSharedChatsSkeleton:a,sidebarFavoriteChatsAndProjectsSkeleton:n,sidebarRecentChatsCollapsed:o,sidebarSharedChatsCollapsed:s,sidebarFavoriteChatsAndProjectsCollapsed:i,projectsSkeleton:w.store.get(t.projectsSkeleton),lastUpdated:w.store.get(t.lastUpdated)}}(e);return a?(P("scoped",e,a),a):(P("scoped",e,d),d)}let L=(0,k.cacheResultById)(U.root,(e="root")=>{if("root"!==e)throw Error('Invalid rootId, must be "root"');let r=O(e);function a(e,t,r){let a=O(e);P("root",e,{...a,[t]:r,lastUpdated:I()})}let n=(0,t.atom)(r.sidebarCollapsed,(t,r,o)=>{a(e,"sidebarCollapsed",o),r(n,o)}),o=(0,t.atom)(r.lastUpdated,(t,r,n)=>{a(e,"lastUpdated",n),r(o,n)}),s=(0,t.atom)(r.modelConfiguration,(t,r,n)=>{a(e,"modelConfiguration",n),r(s,n)}),i=(0,t.atom)(r.messageMode,(t,r,n)=>{a(e,"messageMode",n),r(i,n)}),l=(0,t.atom)(r.shouldShowUpgrade,(t,r,n)=>{a(e,"shouldShowUpgrade",n),r(l,n)}),u=(0,t.atom)(r.chatPanelLayout,(t,r,n)=>{a(e,"chatPanelLayout",n),r(u,n)}),d=(0,t.atom)(r.chatMobilePanel,(t,r,n)=>{a(e,"chatMobilePanel",n),r(d,n)}),c=(0,t.atom)(r.dismissedFeatureDialogs,(t,r,n)=>{a(e,"dismissedFeatureDialogs",n),r(c,n)}),h=(0,t.atom)(r.toolConfiguration,(t,r,n)=>{a(e,"toolConfiguration",n),r(h,n)});return{sidebarCollapsed:n,lastUpdated:o,modelConfiguration:s,toolConfiguration:h,messageMode:i,shouldShowUpgrade:l,chatPanelLayout:u,chatMobilePanel:d,dismissedFeatureDialogs:c}});function O(e,t){var r;let a;if(t&&e in t&&t[e])return t[e];let n=(r=e,(a=T("root"))&&r in a&&a[r]?a[r]:null);if(n)return n;let o=function(e){let t=U.root.get(e);if(!t)return null;let r=w.store.get(t.sidebarCollapsed),a=w.store.get(t.lastUpdated),n=w.store.get(t.modelConfiguration),o=w.store.get(t.toolConfiguration),s=w.store.get(t.messageMode),i=w.store.get(t.shouldShowUpgrade),l=w.store.get(t.chatPanelLayout);return{sidebarCollapsed:r,lastUpdated:a,modelConfiguration:n,toolConfiguration:o,messageMode:s,shouldShowUpgrade:i,chatPanelLayout:l,chatMobilePanel:w.store.get(t.chatMobilePanel),dismissedFeatureDialogs:w.store.get(t.dismissedFeatureDialogs)}}(e);return o?(P("root",e,o),o):(P("root",e,S),S)}function _(e){let t={chat:[],scoped:[],root:[]};for(let r of Object.keys(v)){let a=e?.[r]?Object.keys(e[r]):[],n=T(r),o=new Set([...n?Object.keys(n):[],...Array.from(U[r].keys()),...a]);t[r]=Array.from(o)}return t}e.s(["getDurableChatAtoms",0,D,"getDurableChatState",()=>M,"getDurableRootAtoms",0,L,"getDurableRootState",()=>O,"getDurableScopedAtoms",0,F,"getDurableScopedState",()=>j,"getDurableStateKeys",()=>_],254211)},534607,e=>{"use strict";var t=e.i(658449);function r(){let[e,r]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{r(navigator.userAgent.toUpperCase().includes("MAC"))},[]),e}e.s(["useMac",()=>r])},472914,435106,e=>{"use strict";var t=e.i(679731),r=e.i(658449),a=e.i(753533),n=e.i(142219),o=e.i(9654);let s=(0,a.cacheResult)(null,()=>({isPointerDown:(0,o.atom)(!1),lastInteract:(0,o.atom)(0)})),i=(0,a.cacheResult)(null,()=>({...s()}));function l(){let e=s();return{setPointerDown:t=>{n.store.set(e.isPointerDown,t)},setLastInteract:t=>{n.store.set(e.lastInteract,t)}}}e.s(["getUserInputActions",()=>l,"getUserInputAtoms",0,i],435106);var u=e.i(393799),d=e.i(610726);function c({children:e,debug:a}){let n,o,s,i,u,c,p;return n=l(),o=(0,r.useCallback)(()=>{n.setPointerDown(!0),n.setLastInteract(Date.now())},[n]),s=(0,r.useCallback)(()=>{n.setPointerDown(!1)},[n]),i=(0,r.useCallback)(()=>{n.setPointerDown(!1),n.setLastInteract(Date.now())},[n]),u=(0,r.useCallback)(()=>{"hidden"===document.visibilityState&&i()},[i]),c=(0,r.useCallback)(()=>{n.setLastInteract(Date.now())},[n]),p=(0,r.useCallback)(()=>{n.setLastInteract(Date.now())},[n]),(0,d.useEventListener)("blur",i,void 0,f),(0,d.useEventListener)("pointerdown",o,void 0,f),(0,d.useEventListener)("pointerup",s,void 0,f),(0,d.useEventListener)("mouseleave",i,void 0,f),(0,d.useEventListener)("mousemove",c,void 0,f),(0,d.useEventListener)("keydown",p,void 0,f),(0,d.useEventListener)("visibilitychange",u,{current:"undefined"!=typeof document?document:null},f),(0,t.jsxs)(t.Fragment,{children:[a&&(0,t.jsx)(h,{}),e]})}function h(){let e=i(),a=(0,u.useAtomValue)(e.isPointerDown),n=(0,u.useAtomValue)(e.lastInteract),o=(0,r.useMemo)(()=>[{name:"isPointerDown",value:a},{name:"lastInteract",value:n}],[a,n]);return(0,t.jsx)("div",{className:"pointer-events-none fixed left-0 top-0 h-full w-full",children:o.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:e.name}),(0,t.jsx)("div",{children:JSON.stringify(e.value)})]},e.name))})}let f={passive:!0,capture:!0};e.s(["UserInputProvider",()=>c],472914)},528517,e=>{"use strict";e.i(472914),e.i(435106),e.s([])},679232,e=>{"use strict";var t=e.i(9654),r=e.i(753533),a=e.i(142219),n=e.i(92479),o=e.i(729602);let s=new Map,i=(0,r.cacheResultById)(s,()=>({activeItem:(0,t.atom)("chat")})),l=new Map,u=(0,r.cacheResultById)(l,e=>{let r=i(e);return{...r,designModeEnabled:(0,t.atom)(e=>"design"===e(r.activeItem))}});function d(e){let t=i(e);return{setActiveItem:e=>a.store.set(t.activeItem,e)}}function c(){let e=(0,n.assertChatId)((0,o.useChatId)());return{atoms:u(e),actions:d(e),chatId:e}}e.s(["getChatSidebarActions",()=>d,"getChatSidebarAtoms",0,u,"useCurrentChatSidebar",()=>c])},275215,e=>{"use strict";var t=e.i(753533),r=e.i(142219),a=e.i(254211),n=e.i(9654);e.i(528517);var o=e.i(435106),s=e.i(679232),i=e.i(92479),l=e.i(729602);let u=new Map,d=(0,t.cacheResultById)(u,()=>({isCollapsedOverride:(0,n.atom)(!1),isPeeking:(0,n.atom)(!1),isChatRoute:(0,n.atom)(!0),renderRecoverHitArea:(0,n.atom)(!1),openedDropdown:(0,n.atom)(!1)})),c=(0,t.cacheResultById)(new Map,e=>{let t=d(e),r=(0,a.getDurableScopedAtoms)(e),o=(0,a.getDurableRootAtoms)("root"),s=(0,n.atom)(e=>e(t.isCollapsedOverride)||e(o.sidebarCollapsed)),i=(0,n.atom)(e=>!e(s)||e(t.isPeeking));return{...t,isVisible:i,isCollapsed:s,sidebarRecentChatsSkeleton:r.sidebarRecentChatsSkeleton,sidebarSharedChatsSkeleton:r.sidebarSharedChatsSkeleton,sidebarFavoriteChatsAndProjectsSkeleton:r.sidebarFavoriteChatsAndProjectsSkeleton,sidebarFavoriteChatsAndProjectsCollapsed:r.sidebarFavoriteChatsAndProjectsCollapsed,sidebarRecentChatsCollapsed:r.sidebarRecentChatsCollapsed,sidebarSharedChatsCollapsed:r.sidebarSharedChatsCollapsed}}),h=null,f=null,p=null,m=null,g=null;function C(){let e=(0,i.assertChatId)((0,l.useChatId)());return{atoms:c("skeleton"),actions:function(e,t){let n=c(e),i=d(e),l=(0,a.getDurableScopedAtoms)(e),u=(0,a.getDurableRootAtoms)("root"),C=(0,o.getUserInputAtoms)();function b(){h&&clearTimeout(h),f&&clearTimeout(f),g&&clearTimeout(g),r.store.get(n.isCollapsed)&&(r.store.set(i.renderRecoverHitArea,!0),g=setTimeout(()=>{r.store.set(i.renderRecoverHitArea,!1)},200)),h=setTimeout(()=>{r.store.set(i.openedDropdown,!1)},50),r.store.set(i.isPeeking,!1)}function S({onlyOnCollapsed:e=!1}={}){(!e||r.store.get(u.sidebarCollapsed))&&(b(),m&&clearTimeout(m),m=setTimeout(()=>m=null,200))}function v(e){r.store.set(u.sidebarCollapsed,e),e&&S()}return{startPeeking:()=>{if(!r.store.get(C.isPointerDown)){if(h&&clearTimeout(h),f&&clearTimeout(f),!m){if(t&&r.store.get((0,s.getChatSidebarAtoms)(t).designModeEnabled)){f=setTimeout(()=>{r.store.set(i.isPeeking,!0),p=Date.now(),f=null},500);return}r.store.set(i.isPeeking,!0),p=Date.now()}}},stopPeeking:b,stopPeekingAfterDelay:function({leavingScreen:e=!1}={}){if(h&&clearTimeout(h),f&&clearTimeout(f),p&&Date.now()-p>200&&!e)return b();h=setTimeout(()=>b(),e?1e3:50)},stopPeekingForced:S,clearStartPeekingTimeout:function(){f&&(clearTimeout(f),f=null)},openSidebar:()=>{v(!1)},collapseSidebar:()=>{v(!0)},toggleSidebar:()=>{v(!r.store.get(u.sidebarCollapsed))},setCollapsedOverride:e=>r.store.set(i.isCollapsedOverride,e),setSidebarRecentChatsSkeleton:e=>r.store.set(l.sidebarRecentChatsSkeleton,e),setSidebarSharedChatsSkeleton:e=>r.store.set(l.sidebarSharedChatsSkeleton,e),setSidebarFavoriteChatsAndProjectsSkeleton:e=>r.store.set(l.sidebarFavoriteChatsAndProjectsSkeleton,e),setSidebarFavoriteChatsAndProjectsCollapsed:e=>r.store.set(l.sidebarFavoriteChatsAndProjectsCollapsed,e),setSidebarRecentChatsCollapsed:e=>r.store.set(l.sidebarRecentChatsCollapsed,e),setSidebarSharedChatsCollapsed:e=>r.store.set(l.sidebarSharedChatsCollapsed,e),setOpenedDropdown:e=>r.store.set(i.openedDropdown,e)}}("skeleton",e)}}e.s(["getWritableSidebarAtoms",0,d,"useCurrentSidebar",()=>C])}]);